(function(a){if(typeof define==="function"&&define.amd){define(["JSRootCore","d3"],a)}else{if(typeof exports==="object"&&typeof module!=="undefined"){var b=require("./JSRootCore.js");a(b,require("./d3.min.js"));if(b.nodejs){b.Painter.readStyleFromURL("?interactive=0&tooltip=0&nomenu&noprogress&notouch&toolbar=0&webgl=0")}}else{if(typeof JSROOT=="undefined"){throw new Error("JSROOT is not defined","JSRootPainter.js")}if(typeof d3!="object"){throw new Error("d3 is not defined","JSRootPainter.js")}if(typeof JSROOT.Painter=="object"){throw new Error("JSROOT.Painter already defined","JSRootPainter.js")}a(JSROOT,d3)}}}(function(b,n){b.sources.push("2d");if(typeof define==="function"&&define.amd){b.loadScript("$$$style/JSRootPainter.css")}if(!b._test_d3_){if((typeof n=="object")&&n.version&&(n.version[0]==="4")){if(n.version!=="4.4.4"){console.log("Reuse existing d3.js "+n.version+", expected 4.4.4")}b._test_d3_=4}else{if((typeof n=="object")&&n.version&&(n.version[0]==="3")){console.log("Older d3.js version "+n.version+" found, try to adjust");n.timeFormat=n.time.format;n.scaleTime=n.time.scale;n.scaleLog=n.scale.log;n.scaleLinear=n.scale.linear;b._test_d3_=3}else{console.error("Fail to identify d3.js version "+(n?n.version:"???"))}}}b.DrawFuncs={lst:[],cache:{}};b.addDrawFunc=function(o,p,q){if((arguments.length==1)&&(typeof arguments[0]=="object")){b.DrawFuncs.lst.push(arguments[0]);return arguments[0]}var r={name:o,func:p,opt:q};b.DrawFuncs.lst.push(r);return r};b.ToolbarIcons={camera:{path:"M 152.00,304.00c0.00,57.438, 46.562,104.00, 104.00,104.00s 104.00-46.562, 104.00-104.00s-46.562-104.00-104.00-104.00S 152.00,246.562, 152.00,304.00z M 480.00,128.00L 368.00,128.00 c-8.00-32.00-16.00-64.00-48.00-64.00L 192.00,64.00 c-32.00,0.00-40.00,32.00-48.00,64.00L 32.00,128.00 c-17.60,0.00-32.00,14.40-32.00,32.00l0.00,288.00 c0.00,17.60, 14.40,32.00, 32.00,32.00l 448.00,0.00 c 17.60,0.00, 32.00-14.40, 32.00-32.00L 512.00,160.00 C 512.00,142.40, 497.60,128.00, 480.00,128.00z M 256.00,446.00c-78.425,0.00-142.00-63.574-142.00-142.00c0.00-78.425, 63.575-142.00, 142.00-142.00c 78.426,0.00, 142.00,63.575, 142.00,142.00 C 398.00,382.426, 334.427,446.00, 256.00,446.00z M 480.00,224.00l-64.00,0.00 l0.00-32.00 l 64.00,0.00 L 480.00,224.00 z"},disk:{path:"M384,0H128H32C14.336,0,0,14.336,0,32v448c0,17.656,14.336,32,32,32h448c17.656,0,32-14.344,32-32V96L416,0H384z M352,160   V32h32v128c0,17.664-14.344,32-32,32H160c-17.664,0-32-14.336-32-32V32h128v128H352z M96,288c0-17.656,14.336-32,32-32h256   c17.656,0,32,14.344,32,32v192H96V288z"},question:{path:"M256,512c141.375,0,256-114.625,256-256S397.375,0,256,0S0,114.625,0,256S114.625,512,256,512z M256,64   c63.719,0,128,36.484,128,118.016c0,47.453-23.531,84.516-69.891,110.016C300.672,299.422,288,314.047,288,320   c0,17.656-14.344,32-32,32c-17.664,0-32-14.344-32-32c0-40.609,37.25-71.938,59.266-84.031   C315.625,218.109,320,198.656,320,182.016C320,135.008,279.906,128,256,128c-30.812,0-64,20.227-64,64.672   c0,17.664-14.336,32-32,32s-32-14.336-32-32C128,109.086,193.953,64,256,64z M256,449.406c-18.211,0-32.961-14.75-32.961-32.969   c0-18.188,14.75-32.953,32.961-32.953c18.219,0,32.969,14.766,32.969,32.953C288.969,434.656,274.219,449.406,256,449.406z"},undo:{path:"M450.159,48.042c8.791,9.032,16.983,18.898,24.59,29.604c7.594,10.706,14.146,22.207,19.668,34.489  c5.509,12.296,9.82,25.269,12.92,38.938c3.113,13.669,4.663,27.834,4.663,42.499c0,14.256-1.511,28.863-4.532,43.822  c-3.009,14.952-7.997,30.217-14.953,45.795c-6.955,15.577-16.202,31.52-27.755,47.826s-25.88,32.9-42.942,49.807  c-5.51,5.444-11.787,11.67-18.834,18.651c-7.033,6.98-14.496,14.366-22.39,22.168c-7.88,7.802-15.955,15.825-24.187,24.069  c-8.258,8.231-16.333,16.203-24.252,23.888c-18.3,18.13-37.354,37.016-57.191,56.65l-56.84-57.445  c19.596-19.472,38.54-38.279,56.84-56.41c7.75-7.685,15.772-15.604,24.108-23.757s16.438-16.163,24.33-24.057  c7.894-7.893,15.356-15.33,22.402-22.312c7.034-6.98,13.312-13.193,18.821-18.651c22.351-22.402,39.165-44.648,50.471-66.738  c11.279-22.09,16.932-43.567,16.932-64.446c0-15.785-3.217-31.005-9.638-45.671c-6.422-14.665-16.229-28.504-29.437-41.529  c-3.282-3.282-7.358-6.395-12.217-9.325c-4.871-2.938-10.381-5.503-16.516-7.697c-6.121-2.201-12.815-3.992-20.058-5.373  c-7.242-1.374-14.9-2.064-23.002-2.064c-8.218,0-16.802,0.834-25.788,2.507c-8.961,1.674-18.053,4.429-27.222,8.271  c-9.189,3.842-18.456,8.869-27.808,15.089c-9.358,6.219-18.521,13.819-27.502,22.793l-59.92,60.271l93.797,94.058H0V40.91  l93.27,91.597l60.181-60.532c13.376-15.018,27.222-27.248,41.536-36.697c14.308-9.443,28.608-16.776,42.89-21.992  c14.288-5.223,28.505-8.74,42.623-10.557C294.645,0.905,308.189,0,321.162,0c13.429,0,26.389,1.185,38.84,3.562  c12.478,2.377,24.2,5.718,35.192,10.029c11.006,4.311,21.126,9.404,30.374,15.265C434.79,34.724,442.995,41.119,450.159,48.042z"},arrow_right:{path:"M30.796,226.318h377.533L294.938,339.682c-11.899,11.906-11.899,31.184,0,43.084c11.887,11.899,31.19,11.893,43.077,0  l165.393-165.386c5.725-5.712,8.924-13.453,8.924-21.539c0-8.092-3.213-15.84-8.924-21.551L338.016,8.925  C332.065,2.975,324.278,0,316.478,0c-7.802,0-15.603,2.968-21.539,8.918c-11.899,11.906-11.899,31.184,0,43.084l113.391,113.384  H30.796c-16.822,0-30.463,13.645-30.463,30.463C0.333,212.674,13.974,226.318,30.796,226.318z"},arrow_up:{path:"M295.505,629.446V135.957l148.193,148.206c15.555,15.559,40.753,15.559,56.308,0c15.555-15.538,15.546-40.767,0-56.304  L283.83,11.662C276.372,4.204,266.236,0,255.68,0c-10.568,0-20.705,4.204-28.172,11.662L11.333,227.859  c-7.777,7.777-11.666,17.965-11.666,28.158c0,10.192,3.88,20.385,11.657,28.158c15.563,15.555,40.762,15.555,56.317,0  l148.201-148.219v493.489c0,21.993,17.837,39.82,39.82,39.82C277.669,669.267,295.505,651.439,295.505,629.446z"},arrow_diag:{path:"M279.875,511.994c-1.292,0-2.607-0.102-3.924-0.312c-10.944-1.771-19.333-10.676-20.457-21.71L233.97,278.348  L22.345,256.823c-11.029-1.119-19.928-9.51-21.698-20.461c-1.776-10.944,4.031-21.716,14.145-26.262L477.792,2.149  c9.282-4.163,20.167-2.165,27.355,5.024c7.201,7.189,9.199,18.086,5.024,27.356L302.22,497.527  C298.224,506.426,289.397,511.994,279.875,511.994z M118.277,217.332l140.534,14.294c11.567,1.178,20.718,10.335,21.878,21.896  l14.294,140.519l144.09-320.792L118.277,217.332z"},auto_zoom:{path:"M505.441,242.47l-78.303-78.291c-9.18-9.177-24.048-9.171-33.216,0c-9.169,9.172-9.169,24.045,0.006,33.217l38.193,38.188  H280.088V80.194l38.188,38.199c4.587,4.584,10.596,6.881,16.605,6.881c6.003,0,12.018-2.297,16.605-6.875  c9.174-9.172,9.174-24.039,0.011-33.217L273.219,6.881C268.803,2.471,262.834,0,256.596,0c-6.229,0-12.202,2.471-16.605,6.881  l-78.296,78.302c-9.178,9.172-9.178,24.045,0,33.217c9.177,9.171,24.051,9.171,33.21,0l38.205-38.205v155.4H80.521l38.2-38.188  c9.177-9.171,9.177-24.039,0.005-33.216c-9.171-9.172-24.039-9.178-33.216,0L7.208,242.464c-4.404,4.403-6.881,10.381-6.881,16.611  c0,6.227,2.477,12.207,6.881,16.61l78.302,78.291c4.587,4.581,10.599,6.875,16.605,6.875c6.006,0,12.023-2.294,16.61-6.881  c9.172-9.174,9.172-24.036-0.005-33.211l-38.205-38.199h152.593v152.063l-38.199-38.211c-9.171-9.18-24.039-9.18-33.216-0.022  c-9.178,9.18-9.178,24.059-0.006,33.222l78.284,78.302c4.41,4.404,10.382,6.881,16.611,6.881c6.233,0,12.208-2.477,16.611-6.881  l78.302-78.296c9.181-9.18,9.181-24.048,0-33.205c-9.174-9.174-24.054-9.174-33.21,0l-38.199,38.188v-152.04h152.051l-38.205,38.199  c-9.18,9.175-9.18,24.037-0.005,33.211c4.587,4.587,10.596,6.881,16.604,6.881c6.01,0,12.024-2.294,16.605-6.875l78.303-78.285  c4.403-4.403,6.887-10.378,6.887-16.611C512.328,252.851,509.845,246.873,505.441,242.47z"},statbox:{path:"M28.782,56.902H483.88c15.707,0,28.451-12.74,28.451-28.451C512.331,12.741,499.599,0,483.885,0H28.782   C13.074,0,0.331,12.741,0.331,28.451C0.331,44.162,13.074,56.902,28.782,56.902zM483.885,136.845H28.782c-15.708,0-28.451,12.741-28.451,28.451c0,15.711,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.74,28.451-28.451C512.331,149.586,499.599,136.845,483.885,136.845zM483.885,273.275H28.782c-15.708,0-28.451,12.731-28.451,28.452c0,15.707,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.744,28.451-28.451C512.337,286.007,499.599,273.275,483.885,273.275zM256.065,409.704H30.492c-15.708,0-28.451,12.731-28.451,28.451c0,15.707,12.744,28.451,28.451,28.451h225.585   c15.707,0,28.451-12.744,28.451-28.451C284.516,422.436,271.785,409.704,256.065,409.704z"},circle:{path:"M256,256 m-150,0 a150,150 0 1,0 300,0 a150,150 0 1,0 -300,0"},three_circles:{path:"M256,85 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,255 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,425 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0 "},diamand:{path:"M256,0L384,256L256,511L128,256z"},rect:{path:"M80,80h352v352h-352z"},cross:{path:"M80,40l176,176l176,-176l40,40l-176,176l176,176l-40,40l-176,-176l-176,176l-40,-40l176,-176l-176,-176z"},CreateSVG:function(r,q,p,t){var o=r.append("svg:svg").attr("class","svg_toolbar_btn").attr("width",p+"px").attr("height",p+"px").attr("viewBox","0 0 512 512").style("overflow","hidden");if("recs" in q){var s={};for(var u=0;u<q.recs.length;++u){b.extend(s,q.recs[u]);o.append("rect").attr("x",s.x).attr("y",s.y).attr("width",s.w).attr("height",s.h).attr("fill",s.f)}}else{o.append("svg:path").attr("d",q.path)}o.append("svg:rect").attr("x",0).attr("y",0).attr("width",512).attr("height",512).style("opacity",0).style("fill","none").style("pointer-events","visibleFill").append("svg:title").text(t);return o}};var a=function(o){this.opt=o&&(typeof o=="string")?o.toUpperCase().trim():"";this.part=""};a.prototype.empty=function(){return this.opt.length===0};a.prototype.remain=function(){return this.opt};a.prototype.check=function(p,o){var r=this.opt.indexOf(p);if(r<0){return false}this.opt=this.opt.substr(0,r)+this.opt.substr(r+p.length);this.part="";if(!o){return true}var q=r;while((q<this.opt.length)&&(this.opt[q]!==" ")&&(this.opt[q]!==",")&&(this.opt[q]!==";")){q++}if(q>r){this.part=this.opt.substr(r,q-r);this.opt=this.opt.substr(0,r)+this.opt.substr(q)}return true};a.prototype.partAsInt=function(q,o){var p=this.part.replace(/^\D+/g,"");p=p?parseInt(p,10):Number.NaN;return isNaN(p)?(o||0):p+(q||0)};var f={Coord:{kCARTESIAN:1,kPOLAR:2,kCYLINDRICAL:3,kSPHERICAL:4,kRAPIDITY:5},root_colors:[],root_line_styles:["","","3,3","1,2","3,4,1,4","5,3,1,3","5,3,1,3,1,3,1,3","5,5","5,3,1,3,1,3","20,5","20,10,1,10","1,3"],root_markers:[0,100,8,7,0,9,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,103,105,104,0,3,4,2,1,106,6,7,5,102,101],root_fonts:["Arial","iTimes New Roman","bTimes New Roman","biTimes New Roman","Arial","oArial","bArial","boArial","Courier New","oCourier New","bCourier New","boCourier New","Symbol","Times New Roman","Wingdings","iSymbol","Verdana"],root_fonts_aver_width:[0.537,0.51,0.535,0.52,0.537,0.54,0.556,0.56,0.6,0.6,0.6,0.6,0.587,0.514,0.896,0.587,0.55],symbols_map:{"#alpha":"\u03B1","#beta":"\u03B2","#chi":"\u03C7","#delta":"\u03B4","#varepsilon":"\u03B5","#phi":"\u03C6","#gamma":"\u03B3","#eta":"\u03B7","#iota":"\u03B9","#varphi":"\u03C6","#kappa":"\u03BA","#lambda":"\u03BB","#mu":"\u03BC","#nu":"\u03BD","#omicron":"\u03BF","#pi":"\u03C0","#theta":"\u03B8","#rho":"\u03C1","#sigma":"\u03C3","#tau":"\u03C4","#upsilon":"\u03C5","#varomega":"\u03D6","#omega":"\u03C9","#xi":"\u03BE","#psi":"\u03C8","#zeta":"\u03B6","#Alpha":"\u0391","#Beta":"\u0392","#Chi":"\u03A7","#Delta":"\u0394","#Epsilon":"\u0395","#Phi":"\u03A6","#Gamma":"\u0393","#Eta":"\u0397","#Iota":"\u0399","#vartheta":"\u03D1","#Kappa":"\u039A","#Lambda":"\u039B","#Mu":"\u039C","#Nu":"\u039D","#Omicron":"\u039F","#Pi":"\u03A0","#Theta":"\u0398","#Rho":"\u03A1","#Sigma":"\u03A3","#Tau":"\u03A4","#Upsilon":"\u03A5","#varsigma":"\u03C2","#Omega":"\u03A9","#Xi":"\u039E","#Psi":"\u03A8","#Zeta":"\u0396","#varUpsilon":"\u03D2","#epsilon":"\u03B5","#sqrt":"\u221A","#bar":"","#leq":"\u2264","#/":"\u2044","#infty":"\u221E","#voidb":"\u0192","#club":"\u2663","#diamond":"\u2666","#heart":"\u2665","#spade":"\u2660","#leftrightarrow":"\u2194","#leftarrow":"\u2190","#uparrow":"\u2191","#rightarrow":"\u2192","#downarrow":"\u2193","#circ":"\u02C6","#pm":"\xB1","#doublequote":"\u2033","#geq":"\u2265","#times":"\xD7","#propto":"\u221D","#partial":"\u2202","#bullet":"\u2022","#divide":"\xF7","#neq":"\u2260","#equiv":"\u2261","#approx":"\u2248","#3dots":"\u2026","#cbar":"\x7C","#topbar":"\xAF","#downleftarrow":"\u21B5","#aleph":"\u2135","#Jgothic":"\u2111","#Rgothic":"\u211C","#voidn":"\u2118","#otimes":"\u2297","#oplus":"\u2295","#oslash":"\u2205","#cap":"\u2229","#cup":"\u222A","#supseteq":"\u2287","#supset":"\u2283","#notsubset":"\u2284","#subseteq":"\u2286","#subset":"\u2282","#int":"\u222B","#in":"\u2208","#notin":"\u2209","#angle":"\u2220","#nabla":"\u2207","#oright":"\xAE","#ocopyright":"\xA9","#trademark":"\u2122","#prod":"\u220F","#surd":"\u221A","#upoint":"\u02D9","#corner":"\xAC","#wedge":"\u2227","#vee":"\u2228","#Leftrightarrow":"\u21D4","#Leftarrow":"\u21D0","#Uparrow":"\u21D1","#Rightarrow":"\u21D2","#Downarrow":"\u21D3","#LT":"\x3C","#void1":"\xAE","#copyright":"\xA9","#void3":"\u2122","#sum":"\u2211","#arctop":"\u239B","#lbar":"\u23B8","#arcbottom":"\u239D","#void8":"","#bottombar":"\u230A","#arcbar":"\u23A7","#ltbar":"\u23A8","#AA":"\u212B","#aa":"\u00E5","#void06":"","#GT":"\x3E","#forall":"\u2200","#exists":"\u2203","#vec":"","#dot":"\u22C5","#hat":"\xB7","#ddot":"","#acute":"acute","#grave":"","#check":"\u2713","#tilde":"\u02DC","#slash":"\u2044","#hbar":"\u0127","#box":"\u25FD","#Box":"\u2610","#parallel":"\u2225","#perp":"\u22A5","#odot":"\u2299","#left":"","#right":"","{}":""},math_symbols_map:{"#LT":"\\langle","#GT":"\\rangle","#club":"\\clubsuit","#spade":"\\spadesuit","#heart":"\\heartsuit","#diamond":"\\diamondsuit","#voidn":"\\wp","#voidb":"f","#copyright":"(c)","#ocopyright":"(c)","#trademark":"TM","#void3":"TM","#oright":"R","#void1":"R","#3dots":"\\ldots","#lbar":"\\mid","#void8":"\\mid","#divide":"\\div","#Jgothic":"\\Im","#Rgothic":"\\Re","#doublequote":'"',"#plus":"+","#minus":"-","#/":"/","#upoint":".","#aa":"\\mathring{a}","#AA":"\\mathring{A}","#omicron":"o","#Alpha":"A","#Beta":"B","#Epsilon":"E","#Zeta":"Z","#Eta":"H","#Iota":"I","#Kappa":"K","#Mu":"M","#Nu":"N","#Omicron":"O","#Rho":"P","#Tau":"T","#Chi":"X","#varomega":"\\varpi","#corner":"?","#ltbar":"?","#bottombar":"?","#notsubset":"?","#arcbottom":"?","#cbar":"?","#arctop":"?","#topbar":"?","#arcbar":"?","#downleftarrow":"?","#splitline":"\\genfrac{}{}{0pt}{}","#it":"\\textit","#bf":"\\textbf","#frac":"\\frac","#left{":"\\lbrace","#right}":"\\rbrace","#left\\[":"\\lbrack","#right\\]":"\\rbrack","#\\[\\]{":"\\lbrack"," } ":"\\rbrack","#\\[":"\\lbrack","#\\]":"\\rbrack","#{":"\\lbrace","#}":"\\rbrace"," ":"\\;"}};b.Painter=f;f.convertSymbol=function(o){return f.symbols_map[o]};f.createMenu=function(o,p){document.body.style.cursor="wait";b.AssertPrerequisites("hierarchy;jq2d;",function(){document.body.style.cursor="auto";f.createMenu(o,p)})};f.closeMenu=function(p){var o=document.getElementById(p||"root_ctx_menu");if(o){o.parentNode.removeChild(o);return true}return false};f.readStyleFromURL=function(q){var y=b.GetUrlOption("optimize",q);if(y==""){b.gStyle.OptimizeDraw=2}else{if(y!==null){b.gStyle.OptimizeDraw=parseInt(y);if(isNaN(b.gStyle.OptimizeDraw)){b.gStyle.OptimizeDraw=2}}}var t=b.GetUrlOption("interactive",q);if(t==="nomenu"){b.gStyle.ContextMenu=false}else{if(t!==null){if(!t||(t=="1")){t="111111"}else{if(t=="0"){t="000000"}}if(t.length===6){if(t[0]=="0"){b.gStyle.ToolBar=false}else{if(t[0]=="1"){b.gStyle.ToolBar="popup"}else{if(t[0]=="2"){b.gStyle.ToolBar=true}}}t=t.substr(1)}if(t.length==5){b.gStyle.Tooltip=parseInt(t[0]);b.gStyle.ContextMenu=(t[1]!="0");b.gStyle.Zooming=(t[2]!="0");b.gStyle.MoveResize=(t[3]!="0");b.gStyle.DragAndDrop=(t[4]!="0")}}}var w=b.GetUrlOption("tooltip",q);if(w!==null){b.gStyle.Tooltip=parseInt(w)}var A=b.GetUrlOption("mathjax",q),r=b.GetUrlOption("latex",q);if((A!==null)&&(A!="0")&&(r===null)){r="math"}if(r!==null){b.gStyle.Latex=r}if(b.GetUrlOption("nomenu",q)!=null){b.gStyle.ContextMenu=false}if(b.GetUrlOption("noprogress",q)!=null){b.gStyle.ProgressBox=false}if(b.GetUrlOption("notouch",q)!=null){b.touches=false}if(b.GetUrlOption("adjframe",q)!=null){b.gStyle.CanAdjustFrame=true}var B=b.GetUrlOption("optstat",q);if(B!==null){b.gStyle.fOptStat=parseInt(B)}var x=b.GetUrlOption("optfit",q);if(x!==null){b.gStyle.fOptFit=parseInt(x)}b.gStyle.fStatFormat=b.GetUrlOption("statfmt",q,b.gStyle.fStatFormat);b.gStyle.fFitFormat=b.GetUrlOption("fitfmt",q,b.gStyle.fFitFormat);var z=b.GetUrlOption("toolbar",q);if(z!==null){if(z==="popup"){b.gStyle.ToolBar="popup"}else{b.gStyle.ToolBar=(z!=="0")&&(z!=="false")}}var s=b.GetUrlOption("palette",q);if(s!==null){s=parseInt(s);if(!isNaN(s)&&(s>0)&&(s<113)){b.gStyle.Palette=s}}var p=b.GetUrlOption("embed3d",q);if(p!==null){b.gStyle.Embed3DinSVG=parseInt(p)}var o=b.GetUrlOption("webgl",q);if((o==="0")||(o==="false")){b.gStyle.NoWebGL=true}else{if(o==="ie"){b.gStyle.NoWebGL=!b.browser.isIE}}var u=b.GetUrlOption("geosegm",q);if(u!==null){b.gStyle.GeoGradPerSegm=Math.max(2,parseInt(u))}var v=b.GetUrlOption("geocomp",q);if(v!==null){b.gStyle.GeoCompressComp=(v!=="0")&&(v!=="false")}};f.createRootColors=function(){var p=["white","black","red","green","blue","yellow","magenta","cyan","rgb(89,212,84)","rgb(89,84,217)","white"];p[110]="white";var s=[{col:11,str:"c1b7ad4d4d4d6666668080809a9a9ab3b3b3cdcdcde6e6e6f3f3f3cdc8accdc8acc3c0a9bbb6a4b3a697b8a49cae9a8d9c8f83886657b1cfc885c3a48aa9a1839f8daebdc87b8f9a768a926983976e7b857d9ad280809caca6c0d4cf88dfbb88bd9f83c89a7dc08378cf5f61ac8f94a6787b946971d45a549300ff7b00ff6300ff4b00ff3300ff1b00ff0300ff0014ff002cff0044ff005cff0074ff008cff00a4ff00bcff00d4ff00ecff00fffd00ffe500ffcd00ffb500ff9d00ff8500ff6d00ff5500ff3d00ff2600ff0e0aff0022ff003aff0052ff006aff0082ff009aff00b1ff00c9ff00e1ff00f9ff00ffef00ffd700ffbf00ffa700ff8f00ff7700ff6000ff4800ff3000ff1800ff0000"},{col:201,str:"5c5c5c7b7b7bb8b8b8d7d7d78a0f0fb81414ec4848f176760f8a0f14b81448ec4876f1760f0f8a1414b84848ec7676f18a8a0fb8b814ecec48f1f1768a0f8ab814b8ec48ecf176f10f8a8a14b8b848ecec76f1f1"},{col:390,str:"ffffcdffff9acdcd9affff66cdcd669a9a66ffff33cdcd339a9a33666633ffff00cdcd009a9a00666600333300"},{col:406,str:"cdffcd9aff9a9acd9a66ff6666cd66669a6633ff3333cd33339a3333663300ff0000cd00009a00006600003300"},{col:422,str:"cdffff9affff9acdcd66ffff66cdcd669a9a33ffff33cdcd339a9a33666600ffff00cdcd009a9a006666003333"},{col:590,str:"cdcdff9a9aff9a9acd6666ff6666cd66669a3333ff3333cd33339a3333660000ff0000cd00009a000066000033"},{col:606,str:"ffcdffff9affcd9acdff66ffcd66cd9a669aff33ffcd33cd9a339a663366ff00ffcd00cd9a009a660066330033"},{col:622,str:"ffcdcdff9a9acd9a9aff6666cd66669a6666ff3333cd33339a3333663333ff0000cd00009a0000660000330000"},{col:791,str:"ffcd9acd9a669a66339a6600cd9a33ffcd66ff9a00ffcd33cd9a00ffcd00ff9a33cd66006633009a3300cd6633ff9a66ff6600ff6633cd3300ff33009aff3366cd00336600339a0066cd339aff6666ff0066ff3333cd0033ff00cdff9a9acd66669a33669a009acd33cdff669aff00cdff339acd00cdff009affcd66cd9a339a66009a6633cd9a66ffcd00ff6633ffcd00cd9a00ffcd33ff9a00cd66006633009a3333cd6666ff9a00ff9a33ff6600cd3300ff339acdff669acd33669a00339a3366cd669aff0066ff3366ff0033cd0033ff339aff0066cd00336600669a339acd66cdff009aff33cdff009acd00cdffcd9aff9a66cd66339a66009a9a33cdcd66ff9a00ffcd33ff9a00cdcd00ff9a33ff6600cd33006633009a6633cd9a66ff6600ff6633ff3300cd3300ffff339acd00666600339a0033cd3366ff669aff0066ff3366cd0033ff0033ff9acdcd669a9a33669a0066cd339aff66cdff009acd009aff33cdff009a"},{col:920,str:"cdcdcd9a9a9a666666333333"}];for(var r=0;r<s.length;++r){var q=s[r];for(var t=0;t<q.str.length;t+=6){var o=parseInt(q.col)+parseInt(t/6);p[o]="rgb("+parseInt("0x"+q.str.slice(t,t+2))+","+parseInt("0x"+q.str.slice(t+2,t+4))+","+parseInt("0x"+q.str.slice(t+4,t+6))+")"}}f.root_colors=p};f.MakeColorRGB=function(p){if((p==null)||(p._typename!="TColor")){return null}var o=Math.round(p.fRed*255)+","+Math.round(p.fGreen*255)+","+Math.round(p.fBlue*255);if((p.fAlpha===undefined)||(p.fAlpha==1)){o="rgb("+o+")"}else{o="rgba("+o+","+p.fAlpha.toFixed(3)+")"}switch(o){case"rgb(255,255,255)":o="white";break;case"rgb(0,0,0)":o="black";break;case"rgb(255,0,0)":o="red";break;case"rgb(0,255,0)":o="green";break;case"rgb(0,0,255)":o="blue";break;case"rgb(255,255,0)":o="yellow";break;case"rgb(255,0,255)":o="magenta";break;case"rgb(0,255,255)":o="cyan";break}return o};f.extendRootColors=function(r,s){if(!s||!s.arr){return}for(var t=0;t<s.arr.length;++t){var q=s.arr[t];if(!q||(q._typename!="TColor")){continue}var p=q.fNumber;if((p<0)||(p>10000)){continue}var o=f.MakeColorRGB(q);if(o&&(r[p]!=o)){r[p]=o}}};f.adoptRootColors=function(o){f.extendRootColors(f.root_colors,o)};function m(o){this.palette=o}m.prototype.calcColorIndex=function(p,o){var q=Math.floor((p+0.99)*this.palette.length/(o-1));if(q>this.palette.length-1){q=this.palette.length-1}return q};m.prototype.getColor=function(o){return this.palette[o]};m.prototype.getLength=function(){return this.palette.length};m.prototype.calcColor=function(p,o){var q=this.calcColorIndex(p,o);return this.getColor(q)};function g(o){this.x0=this.y0=0;this.color="black";this.style=1;this.size=8;this.scale=1;this.stroke=true;this.fill=true;this.marker="";this.ndig=0;this.used=true;this.changed=false;this.func=this.Apply.bind(this);this.SetArgs(o);this.changed=false}g.prototype.SetArgs=function(o){if((typeof o=="object")&&(typeof o.fMarkerStyle=="number")){o={attr:o}}if(o.attr){if(o.color===undefined){o.color=f.root_colors[o.attr.fMarkerColor]}if(!o.style||(o.style<0)){o.style=o.attr.fMarkerStyle}if(!o.size){o.size=o.attr.fMarkerSize}}this.Change(o.color,o.style,o.size)};g.prototype.reset_pos=function(){this.lastx=this.lasty=null};g.prototype.create=function(o,t){if(!this.optimized){return"M"+(o+this.x0).toFixed(this.ndig)+","+(t+this.y0).toFixed(this.ndig)+this.marker}var r=Math.round(o),s=Math.round(t),q="M"+r+","+s+"h1";var p=(this.lastx===null)?q:("m"+(r-this.lastx)+","+(s-this.lasty)+"h1");this.lastx=r+1;this.lasty=s;return(p.length<q.length)?p:q};g.prototype.GetFullSize=function(){return this.scale*this.size};g.prototype.MarkerLength=function(){return this.marker?this.marker.length:10};g.prototype.Change=function(p,s,r){this.changed=true;if(p!==undefined){this.color=p}if((s!==undefined)&&(s>=0)){this.style=s}if(r!==undefined){this.size=r}else{r=this.size}this.x0=this.y0=0;if((this.style===1)||(this.style===777)){this.fill=false;this.marker="h1";this.size=1;this.optimized=true;this.reset_pos();return true}this.optimized=false;var t=f.root_markers[this.style];if(t===undefined){t=100}var o=t%100;this.fill=(t>=100);switch(this.style){case 1:this.size=1;this.scale=1;break;case 6:this.size=2;this.scale=1;break;case 7:this.size=3;this.scale=1;break;default:this.size=r;this.scale=8}r=this.GetFullSize();this.ndig=(r>7)?0:((r>2)?1:2);if(o==6){this.ndig++}var u=(r/2).toFixed(this.ndig),q=r.toFixed(this.ndig);switch(o){case 0:this.x0=-parseFloat(u);q=(parseFloat(u)*2).toFixed(this.ndig);this.marker="a"+u+","+u+",0,1,0,"+q+",0a"+u+","+u+",0,1,0,-"+q+",0z";break;case 1:var v=(r/3).toFixed(this.ndig);this.x0=this.y0=r/6;this.marker="h"+v+"v-"+v+"h-"+v+"v-"+v+"h-"+v+"v"+v+"h-"+v+"v"+v+"h"+v+"v"+v+"h"+v+"z";break;case 2:this.x0=-r/2;this.marker="l"+u+",-"+u+"l"+u+","+u+"l-"+u+","+u+"z";break;case 3:this.x0=this.y0=-r/2;this.marker="v"+q+"h"+q+"v-"+q+"z";break;case 4:this.y0=r/2;this.marker="l-"+u+",-"+q+"h"+q+"z";break;case 5:this.y0=-r/2;this.marker="l-"+u+","+q+"h"+q+"z";break;case 6:this.y0=-r/2;this.marker="l"+(r/3).toFixed(this.ndig)+","+q+"l-"+(5/6*r).toFixed(this.ndig)+",-"+(5/8*r).toFixed(this.ndig)+"h"+q+"l-"+(5/6*r).toFixed(this.ndig)+","+(5/8*r).toFixed(this.ndig)+"z";break;case 7:this.x0=this.y0=-r/2;this.marker="l"+q+","+q+"m0,-"+q+"l-"+q+","+q+"m0,-"+u+"h"+q+"m-"+u+",-"+u+"v"+q;break;case 8:this.y0=-r/2;this.marker="v"+q+"m-"+u+",-"+u+"h"+q;break;case 9:this.x0=this.y0=-r/2;this.marker="l"+q+","+q+"m0,-"+q+"l-"+q+","+q;break;default:this.x0=-r/2;this.marker="l"+u+",-"+u+"l"+u+","+u+"l-"+u+","+u+"z";break}return true};g.prototype.Apply=function(o){o.style("stroke",this.stroke?this.color:"none");o.style("fill",this.fill?this.color:"none")};g.prototype.verifyDirectChange=function(o){this.Change(this.color,parseInt(this.style),parseFloat(this.size))};g.prototype.CreateSample=function(p,q,o){this.reset_pos();p.append("path").attr("d",this.create(q/2,o/2)).call(this.func)};function d(o){this.func=this.Apply.bind(this);this.used=true;if(o._typename&&(o.fLineStyle!==undefined)){o={attr:o}}this.SetArgs(o)}d.prototype.SetArgs=function(o){if(o.attr){o.color=o.color0||f.root_colors[o.attr.fLineColor];if(o.width===undefined){o.width=o.attr.fLineWidth}o.style=o.attr.fLineStyle}else{if(typeof o.color=="string"){if((o.color!=="none")&&!o.width){o.width=1}}else{if(typeof o.color=="number"){o.color=f.root_colors[o.color]}}}if(o.width===undefined){o.width=(o.color&&o.color!="none")?1:0}this.color=(o.width===0)?"none":o.color;this.width=o.width;this.style=o.style;if(o.can_excl){this.excl_side=this.excl_width=0;if(Math.abs(this.width)>99){this.excl_side=(this.width<0)?-1:1;this.excl_width=Math.floor(this.width/100)*5;this.width=Math.abs(this.width%100)}}if(!this.color&&(this.width>0)){this.color="lightgrey"}};d.prototype.ChangeExcl=function(o,p){if(p!==undefined){this.excl_width=p}if(o!==undefined){this.excl_side=o;if((this.excl_width===0)&&(this.excl_side!==0)){this.excl_width=20}}this.changed=true};d.prototype.empty=function(){return this.color=="none"};d.prototype.Apply=function(o){this.used=true;if(this.empty()){o.style("stroke",null).style("stroke-width",null).style("stroke-dasharray",null)}else{o.style("stroke",this.color).style("stroke-width",this.width).style("stroke-dasharray",f.root_line_styles[this.style]||null)}};d.prototype.Change=function(o,q,p){if(o!==undefined){this.color=o}if(q!==undefined){this.width=q}if(p!==undefined){this.style=p}this.changed=true};d.prototype.CreateSample=function(p,q,o){p.append("path").attr("d","M0,"+o/2+"h"+q).call(this.func)};function i(o){this.color="none";this.colorindx=0;this.pattern=0;this.used=true;this.kind=o.kind||2;this.changed=false;this.func=this.Apply.bind(this);this.SetArgs(o);this.changed=false}i.prototype.SetArgs=function(o){if(o.attr&&(typeof o.attr=="object")){if((o.pattern===undefined)&&(o.attr.fFillStyle!==undefined)){o.pattern=o.attr.fFillStyle}if((o.color===undefined)&&(o.attr.fFillColor!==undefined)){o.color=o.attr.fFillColor}}this.Change(o.color,o.pattern,o.svg,o.color_as_svg)};i.prototype.Apply=function(o){this.used=true;o.style("fill",this.fillcolor());if("opacity" in this){o.style("opacity",this.opacity)}if("antialias" in this){o.style("antialias",this.antialias)}};i.prototype.fillcolor=function(){return this.pattern_url||this.color};i.prototype.fillcoloralt=function(o){return this.color&&(this.color!="none")?this.color:o};i.prototype.empty=function(){var o=this.fillcolor();return !o||(o=="none")};i.prototype.SetSolidColor=function(o){delete this.pattern_url;this.color=o;this.pattern=1001};i.prototype.isSolid=function(o){if(this.pattern!==1001){return false}return !o||o==this.color};i.prototype.verifyDirectChange=function(o){if(typeof this.pattern=="string"){this.pattern=parseInt(this.pattern)}if(isNaN(this.pattern)){this.pattern=0}this.Change(this.color,this.pattern,o?o.svg_canvas():null,true)};i.prototype.Change=function(D,I,A,t){delete this.pattern_url;this.changed=true;if((D!==undefined)&&!isNaN(D)&&!t){this.colorindx=parseInt(D)}if((I!==undefined)&&!isNaN(I)){this.pattern=parseInt(I);delete this.opacity;delete this.antialias}if((this.pattern==1000)&&(this.colorindx===0)){this.pattern_url="white";return true}if(this.pattern==1000){this.pattern=1001}if(this.pattern<1001){this.pattern_url="none";return true}if(this.isSolid()&&(this.colorindx===0)&&(this.kind===1)&&!t){this.pattern_url="none";return true}var J=this.colorindx;if(t){this.color=D;J=10000+b.id_counter++}else{this.color=b.Painter.root_colors[J]}if(typeof this.color!="string"){this.color="none"}if(this.isSolid()){return true}if((this.pattern>=4000)&&(this.pattern<=4100)){this.opacity=(this.pattern-4000)/100;return true}if(!A||A.empty()||(this.pattern<3000)){return false}var B="pat_"+this.pattern+"_"+J,o=A.select(".canvas_defs");if(o.empty()){o=A.insert("svg:defs",":first-child").attr("class","canvas_defs")}this.pattern_url="url(#"+B+")";this.antialias=false;if(!o.select("."+B).empty()){if(t){console.log("find id in def",B)}return true}var q="",v=null,C="",r="",y=2,H=2;switch(this.pattern){case 3001:y=H=2;C="M0,0h1v1h-1zM1,1h1v1h-1z";break;case 3002:y=4;H=2;C="M1,0h1v1h-1zM3,1h1v1h-1z";break;case 3003:y=H=4;C="M2,1h1v1h-1zM0,3h1v1h-1z";break;case 3004:y=H=8;q="M8,0L0,8";break;case 3005:y=H=8;q="M0,0L8,8";break;case 3006:y=H=4;q="M1,0v4";break;case 3007:y=H=4;q="M0,1h4";break;case 3008:y=H=10;C="M0,3v-3h3ZM7,0h3v3ZM0,7v3h3ZM7,10h3v-3ZM5,2l3,3l-3,3l-3,-3Z";q="M0,3l5,5M3,10l5,-5M10,7l-5,-5M7,0l-5,5";break;case 3009:y=12;H=12;q="M0,0A6,6,0,0,0,12,0M6,6A6,6,0,0,0,12,12M6,6A6,6,0,0,1,0,12";v="none";break;case 3010:y=H=10;q="M0,2h10M0,7h10M2,0v2M7,2v5M2,7v3";break;case 3011:y=9;H=18;q="M5,0v8M2,1l6,6M8,1l-6,6M9,9v8M6,10l3,3l-3,3M0,9v8M3,10l-3,3l3,3";v="none";break;case 3012:y=10;H=20;q="M5,1A4,4,0,0,0,5,9A4,4,0,0,0,5,1M0,11A4,4,0,0,1,0,19M10,11A4,4,0,0,0,10,19";v="none";break;case 3013:y=H=7;q="M0,0L7,7M7,0L0,7";v="none";break;case 3014:y=H=16;q="M0,0h16v16h-16v-16M0,12h16M12,0v16M4,0v8M4,4h8M0,8h8M8,4v8";v="none";break;case 3015:y=6;H=12;q="M2,1A2,2,0,0,0,2,5A2,2,0,0,0,2,1M0,7A2,2,0,0,1,0,11M6,7A2,2,0,0,0,6,11";v="none";break;case 3016:y=12;H=7;q="M0,1A3,2,0,0,1,3,3A3,2,0,0,0,9,3A3,2,0,0,1,12,1";v="none";break;case 3017:y=H=4;q="M3,1l-2,2";break;case 3018:y=H=4;q="M1,1l2,2";break;case 3019:y=H=12;q="M1,6A5,5,0,0,0,11,6A5,5,0,0,0,1,6h-1h1A5,5,0,0,1,6,11v1v-1A5,5,0,0,1,11,6h1h-1A5,5,0,0,1,6,1v-1v1A5,5,0,0,1,1,6";v="none";break;case 3020:y=7;H=12;q="M1,0A2,3,0,0,0,3,3A2,3,0,0,1,3,9A2,3,0,0,0,1,12";v="none";break;case 3021:y=H=8;q="M8,2h-2v4h-4v2M2,0v2h-2";v="none";break;case 3022:y=H=8;q="M0,2h2v4h4v2M6,0v2h2";v="none";break;case 3023:y=H=8;C="M4,0h4v4zM8,4v4h-4z";r="M4,0L0,4L4,8L8,4Z";break;case 3024:y=H=16;C="M0,8v8h2v-8zM8,0v8h2v-8M4,14v2h12v-2z";r="M0,2h8v6h4v-6h4v12h-12v-6h-4z";break;case 3025:y=H=18;C="M5,13v-8h8ZM18,0v18h-18l5,-5h8v-8Z";break;default:var p=this.pattern%1000,E=p%10,F=((p-E)%100)/10,G=(p-F*10-E)/100;if(!G){break}var z=G*12;y=H=6*z;function x(R,L){var N=[],K=z,Q=0,O,P=H;if(Math.abs(R)<3){K=Math.round(z/12*9)}if(R==0){K=Math.round(z/12*8);Q=K/2}else{if(R>0){P-=K}else{Q=K}}while(Q<=P){O=Q+R*K;if(O<0){var w=Math.round(Q/(Q-O)*y);N.push(0,Q,w,0);N.push(y,H-Q,y-w,H)}else{if(O>H){var w=Math.round((H-Q)/(O-Q)*y);N.push(0,Q,w,H);N.push(y,H-Q,y-w,0)}else{N.push(0,Q,y,O)}}Q+=K}for(var M=0;M<N.length;M+=4){if(L){q+="M"+N[M+1]+","+N[M]+"L"+N[M+3]+","+N[M+2]}else{q+="M"+N[M]+","+N[M+1]+"L"+N[M+2]+","+N[M+3]}}}switch(F){case 0:x(0);break;case 1:x(1);break;case 2:x(2);break;case 3:x(3);break;case 4:x(6);break;case 6:x(3,true);break;case 7:x(2,true);break;case 8:x(1,true);break;case 9:x(0,true);break}switch(E){case 0:if(F){x(0)}break;case 1:x(-1);break;case 2:x(-2);break;case 3:x(-3);break;case 4:x(-6);break;case 6:x(-3,true);break;case 7:x(-2,true);break;case 8:x(-1,true);break;case 9:if(F!=9){x(0,true)}break}break}if(!C&&!q){return false}var u=o.append("svg:pattern").attr("id",B).attr("class",B).attr("patternUnits","userSpaceOnUse").attr("width",y).attr("height",H);if(r){var s=n.rgb(this.color);s.r=Math.round((s.r+255)/2);s.g=Math.round((s.g+255)/2);s.b=Math.round((s.b+255)/2);u.append("svg:path").attr("d",r).style("fill",s)}if(C){u.append("svg:path").attr("d",C).style("fill",this.color)}if(q){u.append("svg:path").attr("d",q).style("stroke",this.color).style("stroke-width",1).style("fill",v)}return true};i.prototype.CreateSample=function(p,q,o){var r=new i({svg:p,pattern:this.pattern,color:this.color,color_as_svg:true});p.append("path").attr("d","M0,0h"+q+"v"+o+"h-"+q+"z").call(r.func)};f.clearCuts=function(o){var r=o.indexOf("["),q=o.indexOf("]");if((r>=0)&&(q>=0)&&(r<q)){for(var p=r;p<=q;++p){o[p]=" "}}return o};f.getFontDetails=function(s,p){var o={name:"Arial",size:Math.round(p||11),weight:null,style:null},r=Math.floor(s/10),q=f.root_fonts[r]||"";while(q.length>0){if(q[0]==="b"){o.weight="bold"}else{if(q[0]==="i"){o.style="italic"}else{if(q[0]==="o"){o.style="oblique"}else{break}}}q=q.substr(1)}if(q=="Symbol"){o.weight=o.style=null}o.name=q;o.aver_width=f.root_fonts_aver_width[r]||0.55;o.setFont=function(u,t){u.attr("font-family",this.name);if(t!="without-size"){u.attr("font-size",this.size).attr("xml:space","preserve")}if(this.weight){u.attr("font-weight",this.weight)}if(this.style){u.attr("font-style",this.style)}};o.func=o.setFont.bind(o);return o};f.chooseTimeFormat=function(p,o){if(p<0.5){return o?"%S.%L":"%M:%S.%L"}if(p<30){return o?"%Mm%S":"%H:%M:%S"}p/=60;if(p<30){return o?"%Hh%M":"%d/%m %H:%M"}p/=60;if(p<12){return o?"%d-%Hh":"%d/%m/%y %Hh"}p/=24;if(p<15.218425){return o?"%d/%m":"%d/%m/%y"}p/=30.43685;if(p<6){return"%d/%m/%y"}p/=12;if(p<2){return o?"%m/%y":"%d/%m/%y"}return"%Y"};f.getTimeFormat=function(o){var p=o.fTimeFormat.indexOf("%F");if(p>=0){return o.fTimeFormat.substr(0,p)}return o.fTimeFormat};f.getTimeOffset=function(t){var D=t.fTimeFormat.indexOf("%F");if(D<0){return b.gStyle.fTimeOffset*1000}var C=t.fTimeFormat.substr(D+2);if(C.indexOf("1995-01-01 00:00:00s0")==0){return 788918400000}if((C=="0")||(C=="")){return 0}function x(F,E,p){var H=C.indexOf(F);if(H<0){H="";return E}var G=parseInt(C.substr(0,H));C=C.substr(H+1);if(isNaN(G)||(G<E)||(G>p)){H="";return E}return G}var A=x("-",1970,2300),z=x("-",1,12)-1,B=x(" ",1,31),u=x(":",0,23),w=x(":",0,59),y=x("s",0,59),q=x(" ",0,999);var r=new Date(Date.UTC(A,z,B,u,w,y,q));var v=r.getTime();C=C.toUpperCase();if(C.indexOf("GMT")==0){v+=r.getTimezoneOffset()*60000;C=C.substr(4).trim();if(C.length>3){var o=0,s=1000;if(C[0]=="-"){o=1;s=-1000}v-=s*(parseInt(C.substr(o,2))*3600+parseInt(C.substr(o+2,2))*60)}}return v};f.translateLaTeX=function(o){while((o.length>2)&&(o[0]=="{")&&(o[o.length-1]=="}")){o=o.substr(1,o.length-2)}if(!f.symbolsRegexCache){f.symbolsRegexCache=new RegExp("("+Object.keys(f.symbols_map).join("|").replace(/\{/g,"{").replace(/\\}/g,"\\}")+")","g")}o=o.replace(f.symbolsRegexCache,f.convertSymbol);o=o.replace(/\{\}/g,"");return o};f.approxTextWidth=function(o,p){return p.length*o.size*o.aver_width};f.isAnyLatex=function(o){return(o.indexOf("#")>=0)||(o.indexOf("\\")>=0)||(o.indexOf("{")>=0)};f.translateMath=function(z,u,v,A){if(u!=2){for(var B in f.math_symbols_map){z=z.replace(new RegExp(B,"g"),f.math_symbols_map[B])}for(var B in f.symbols_map){if(B.length>2){z=z.replace(new RegExp(B,"g"),"\\"+B.substr(1))}}var y="",w=true;while(z){var q=z.indexOf("#color[");if((q<0)&&w){y=z;break}w=false;if(q!=0){var o=(q<0)?z:z.substr(0,q);y+=o;if(q<0){break}}z=z.substr(q+7);q=z.indexOf("]{");if(q<=0){break}var C=parseInt(z.substr(0,q));if(isNaN(C)){break}var t=A.get_color(C),s=1;z=z.substr(q+2);q=-1;while(s&&(++q<z.length)){if(z[q]=="{"){s++}else{if(z[q]=="}"){s--}}}if(s!=0){break}var r=z.substr(0,q);z=z.substr(q+1);if(r){y+="\\color{"+t+"}{"+r+"}"}}z=y}else{z=z.replace(/\\\^/g,"\\hat")}if(typeof v!="string"){return"\\("+z+"\\)"}return"\\(\\color{"+v+"}{"+z+"}\\)"};f.BuildSvgPath=function(u,H,z,s){var B=u.indexOf("bezier")>=0;if(s===undefined){s=B?2:0}if(z===undefined){z=0}function K(N,M){return(M.gry-N.gry)/(M.grx-N.grx)}function A(P){var O=0,N=P.length-1,M=[],S=P[0],R=P[1],Q=M[0]=K(S,R);while(++O<N){M[O]=(Q+(Q=K(S=R,R=P[O+1])))/2}M[O]=Q;return M}function q(S){var T,O,N,R,M=A(S),Q=-1,P=S.length-1;while(++Q<P){T=K(S[Q],S[Q+1]);if(Math.abs(T)<0.000001){M[Q]=M[Q+1]=0}else{O=M[Q]/T;N=M[Q+1]/T;R=O*O+N*N;if(R>9){R=T*3/Math.sqrt(R);M[Q]=R*O;M[Q+1]=R*N}}}Q=-1;while(++Q<=P){R=(S[Math.min(P,Q+1)].grx-S[Math.max(0,Q-1)].grx)/(6*(1+M[Q]*M[Q]));S[Q].dgrx=R||0;S[Q].dgry=M[Q]*R||0}}var L={path:"",close:""},D=H[0],E,p=Math.max(D.gry,z+5),J=Math.round(D.grx),I=Math.round(D.gry),x,w,v=H.length;function o(O){var M=Math.round(O);if((s==0)||(M===O)){return M.toString()}var N=O.toFixed(s);if((N[N.length-1]=="0")&&(N.indexOf(".")<N.length-1)){N=N.substr(0,N.length-1)}return N}L.path=((u[0]=="L")?"L":"M")+o(D.grx)+","+o(D.gry);if(B||u.indexOf("calc")>=0){q(H)}if(B){L.path+="c"+o(D.dgrx)+","+o(D.dgry)+",";for(var G=1;G<v;++G){var E=D;D=H[G];if(G>1){L.path+="s"}L.path+=o(D.grx-D.dgrx-E.grx)+","+o(D.gry-D.dgry-E.gry)+","+o(D.grx-E.grx)+","+o(D.gry-E.gry);p=Math.max(p,E.gry)}}else{if(v<10000){for(var G=1;G<v;++G){D=H[G];x=Math.round(D.grx)-J;w=Math.round(D.gry)-I;if(x&&w){L.path+="l"+x+","+w}else{if(!x&&w){L.path+="v"+w}else{if(x&&!w){L.path+="h"+x}}}J+=x;I+=w;p=Math.max(p,I)}}else{var F,C,t=I,r=I,y=I;for(var G=1;G<v;++G){D=H[G];F=Math.round(D.grx);C=Math.round(D.gry);p=Math.max(p,C);x=F-J;if(x===0){t=Math.min(t,C);r=Math.max(r,C);y=C;continue}if(t!==r){if(t!=I){L.path+="v"+(t-I)}L.path+="v"+(r-t);if(r!=y){L.path+="v"+(y-r)}I=y}w=C-I;if(w){L.path+="l"+x+","+w}else{L.path+="h"+x}J=F;I=C;y=t=r=C}if(t!=r){if(t!=I){L.path+="v"+(t-I)}L.path+="v"+(r-t);if(r!=y){L.path+="v"+(y-r)}I=y}}}if(z>0){L.close="L"+o(D.grx)+","+o(p)+"h"+o(H[0].grx-D.grx)+"Z"}return L};function h(o){this.path=o;this.connid=null;this.req=null;this.nextrequest("","connect")}h.prototype.nextrequest=function(u,r){var p=this.path,t="";if(r==="connect"){p+="?connect";this.connid="connect"}else{if(r==="close"){if((this.connid===null)||(this.connid==="close")){return}p+="?connection="+this.connid+"&close";this.connid="close";if(b.browser.qt5){t=";sync"}}else{if((this.connid===null)||(typeof this.connid!=="number")){return console.error("No connection")}else{p+="?connection="+this.connid;if(r==="dummy"){p+="&dummy"}}}}if(u){var q="&post=";for(var o=0;o<u.length;++o){q+=u.charCodeAt(o).toString(16)}p+=q}var s=b.NewHttpRequest(p,"text"+t,function(v){if(v===null){v=this.response}if(this.handle.req===this){this.handle.req=null}if(v=="<<nope>>"){v=""}this.handle.processreq(v)});s.handle=this;if(r==="dummy"){this.req=s}s.send()};h.prototype.processreq=function(o){if(o===null){if(typeof this.onerror==="function"){this.onerror("receive data with connid "+(this.connid||"---"))}this.connid=null;return}if(this.connid==="connect"){if(!o){this.connid=null;if(typeof this.onerror==="function"){this.onerror("connection rejected")}return}this.connid=parseInt(o);console.log("Get new longpoll connection with id "+this.connid);if(typeof this.onopen=="function"){this.onopen()}}else{if(this.connid==="close"){if(typeof this.onclose=="function"){this.onclose()}return}else{if((typeof this.onmessage==="function")&&o){this.onmessage({data:o})}}}if(!this.req){this.nextrequest("","dummy")}};h.prototype.send=function(o){this.nextrequest(o)};h.prototype.close=function(){this.nextrequest("","close")};function k(o){if(!window||!("cefQuery" in window)){return null}this.path=o;this.connid=null;this.nextrequest("","connect")}k.prototype.nextrequest=function(q,o){var p={request:"",persistent:false};if(o==="connect"){p.request="connect";p.persistent=true;this.connid="connect"}else{if(o==="close"){if((this.connid===null)||(this.connid==="close")){return}p.request=this.connid+"::close";this.connid="close"}else{if((this.connid===null)||(typeof this.connid!=="number")){return console.error("No connection")}else{p.request=this.connid+"::post";if(q){p.request+="::"+q}}}}if(!p.request){return console.error("No CEF request")}p.request=this.path+"::"+p.request;p.onSuccess=this.onSuccess.bind(this);p.onFailure=this.onFailure.bind(this);this.cefid=window.cefQuery(p);return this};k.prototype.onFailure=function(o,p){console.log("CEF_ERR: "+o);if(typeof this.onerror==="function"){this.onerror("failure with connid "+(this.connid||"---"))}this.connid=null};k.prototype.onSuccess=function(o){if(!o){return}if(this.connid==="connect"){this.connid=parseInt(o);console.log("Get new CEF connection with id "+this.connid);if(typeof this.onopen=="function"){this.onopen()}}else{if(this.connid==="close"){if(typeof this.onclose=="function"){this.onclose()}}else{if((typeof this.onmessage==="function")&&o){this.onmessage({data:o})}}}};k.prototype.send=function(o){this.nextrequest(o)};k.prototype.close=function(){this.nextrequest("","close");if(this.cefid){window.cefQueryCancel(this.cefid)}delete this.cefid};function j(o){if(o=="cefquery"&&(!window||!("cefQuery" in window))){o="longpoll"}this.kind=o;this.state=0;this.cansend=10;this.ackn=10}j.prototype.SetReceiver=function(o){this.receiver=o};j.prototype.Cleanup=function(){delete this.receiver;this.Close(true)};j.prototype.InvokeReceiver=function(p,o){if(this.receiver&&(typeof this.receiver[p]=="function")){this.receiver[p](this,o)}};j.prototype.Close=function(o){if(this.timerid){clearTimeout(this.timerid);delete this.timerid}if(this._websocket&&this.state>0){this.state=o?-1:0;this._websocket.onclose=null;this._websocket.close();delete this._websocket}};j.prototype.Send=function(q,o){if(!this._websocket||(this.state<=0)){return false}if(isNaN(o)||(o===undefined)){o=1}if(this.cansend<=0){console.error("should be queued before sending")}var p=this.ackn+":"+this.cansend+":"+o+":";this.ackn=0;this.cansend--;this._websocket.send(p+q);if(this.kind==="websocket"){if(this.timerid){clearTimeout(this.timerid)}this.timerid=setTimeout(this.KeepAlive.bind(this),10000)}return true};j.prototype.KeepAlive=function(){delete this.timerid;this.Send("KEEPALIVE",0)};j.prototype.CreateRelative=function(p){if(!p||!this.kind||!this.href){return null}var o=new j(this.kind);console.log("Try to connect ",this.href+p);o.Connect(this.href+p);return o};j.prototype.Connect=function(p){this.Close();var o=this,q=0;function r(u){if(o.state!=0){return}if(o._websocket){o._websocket.close()}delete o._websocket;var s=null;if(!p){p=window.location.href;if(p&&p.lastIndexOf("/")>0){p=p.substr(0,p.lastIndexOf("/")+1)}}o.href=p;q++;if(u){console.log("Opening web socket at "+p)}if(q>2){b.progress("Trying to connect "+p)}var t=p;if(o.kind=="cefquery"){if(t.indexOf("rootscheme://rootserver")==0){t=t.substr(23)}console.log("configure cefquery "+t);s=new k(t)}else{if((o.kind!=="longpoll")&&u){t=t.replace("http://","ws://").replace("https://","wss://")+"root.websocket";console.log("configure websocket "+t);s=new WebSocket(t)}else{t+="root.longpoll";console.log("configure longpoll "+t);s=new h(t)}}if(!s){return}o._websocket=s;s.onopen=function(){if(q>2){b.progress()}console.log("websocket initialized");o.state=1;o.Send("READY",0);o.InvokeReceiver("OnWebsocketOpened")};s.onmessage=function(A){var B=A.data;if(typeof B!="string"){return console.log("unsupported message kind: "+(typeof B))}var z=B.indexOf(":"),C=parseInt(B.substr(0,z)),x=B.indexOf(":",z+1),y=parseInt(B.substr(z+1,x-z)),w=B.indexOf(":",x+1),v=parseInt(B.substr(x+1,w-x));o.ackn++;o.cansend+=C;B=B.substr(w+1);if(v==0){console.log("GET chid=0 message",B);if(B=="CLOSE"){o.Close(true);o.InvokeReceiver("OnWebsocketClosed")}}else{o.InvokeReceiver("OnWebsocketMsg",B)}if(o.ackn>7){o.Send("READY",0)}};s.onclose=function(){delete o._websocket;if(o.state>0){console.log("websocket closed");o.state=0;o.InvokeReceiver("OnWebsocketClosed")}};s.onerror=function(v){console.log("websocket error",v);if(o.state>0){o.InvokeReceiver("OnWebsocketError",v);o.state=0}};setTimeout(r,3000)}r(true)};b.ConnectWebWindow=function(o){if(typeof o=="function"){o={callback:o}}else{if(!o||(typeof o!="object")){o={}}}if(o.prereq){return b.AssertPrerequisites(o.prereq,function(){delete o.prereq;b.ConnectWebWindow(o)},o.prereq_logdiv)}if(!o.socket_kind){if(b.GetUrlOption("longpoll")!==null){o.socket_kind="longpoll"}else{if(b.GetUrlOption("cef3")!==null){o.socket_kind="cefquery"}else{if(b.GetUrlOption("qt5")!==null){b.browser.qt5=true;o.socket_kind="longpoll"}else{o.socket_kind="websocket"}}}}var p=new j(o.socket_kind);if(window){window.onbeforeunload=p.Close.bind(p);if(b.browser.qt5){window.onqt5unload=window.onbeforeunload}}if(o.first_recv){o.receiver={OnWebsocketOpened:function(q){console.log("Connected")},OnWebsocketMsg:function(q,r){console.log("Get message "+r+" handle "+!!q);if(r.indexOf(o.first_recv)!=0){return q.Close()}o.first_msg=r.substr(o.first_recv.length);if(!o.prereq2){b.CallBack(o.callback,q,o)}},OnWebsocketClosed:function(q){if(window){window.close()}}}}if(!o.receiver){return b.CallBack(o.callback,p,o)}p.SetReceiver(o.receiver);p.Connect();if(o.prereq2){b.AssertPrerequisites(o.prereq2,function(){delete o.prereq2;if(o.first_msg){b.CallBack(o.callback,p,o)}})}};function l(){this.divid=null}l.prototype.AccessTopPainter=function(p){var o=this.select_main().node(),q=o?o.firstChild:null;if(!q){return null}if(p===true){q.painter=this}else{if(p===false){delete q.painter}}return q.painter};l.prototype.Cleanup=function(p){var o=this.select_main("origin");if(!o.empty()&&!p){o.html("")}if(this._changed_layout){this.set_layout_kind("simple")}this.AccessTopPainter(false);this.divid=null;if(this._hpainter&&typeof this._hpainter.ClearPainter==="function"){this._hpainter.ClearPainter(this)}delete this._changed_layout;delete this._hitemname;delete this._hdrawopt;delete this._hpainter};l.prototype.DrawingReady=function(p){this._ready_called_=true;if(this._ready_callback_!==undefined){var o=this._ready_callback_;if(!this._return_res_painter){p=this}delete this._return_res_painter;delete this._ready_callback_;while(o.length){b.CallBack(o.shift(),p)}}return this};l.prototype.WhenReady=function(o){if(typeof o!=="function"){return}if("_ready_called_" in this){return b.CallBack(o,this)}if(this._ready_callback_===undefined){this._ready_callback_=[]}this._ready_callback_.push(o)};l.prototype.GetObject=function(){return null};l.prototype.MatchObjectType=function(o){return false};l.prototype.UpdateObject=function(o){return false};l.prototype.RedrawPad=function(o){};l.prototype.RedrawObject=function(p){if(!this.UpdateObject(p)){return false}var o=document.body.style.cursor;document.body.style.cursor="wait";this.RedrawPad();document.body.style.cursor=o;return true};l.prototype.CheckResize=function(o){return false};l.prototype.select_main=function(r){if(!this.divid){return n.select(null)}var t=this.divid;if((typeof t=="string")&&(t[0]!="#")){t="#"+t}var p=n.select(t);if(p.empty()||(r==="origin")){return p}var s=p.property("use_enlarge"),q=p.property("layout")||"simple",o=(q=="simple")?"":p.property("layout_selector");if(o){p=p.select(o)}if(!r&&!p.empty()&&s){p=n.select("#jsroot_enlarge_div")}return p};l.prototype.get_layout_kind=function(){var o=this.select_main("origin"),p=o.empty()?"":o.property("layout");return p||"simple"};l.prototype.set_layout_kind=function(q,o){var p=this.select_main("origin");if(!p.empty()){if(!q){q="simple"}p.property("layout",q);p.property("layout_selector",(q!="simple")&&o?o:null);this._changed_layout=(q!=="simple")}};l.prototype.check_main_resize=function(A,o,u){var s=this.enlarge_main("state"),q=this.select_main("origin"),r=this.select_main(),t=5;if(s!=="on"){if(o&&o.width&&o.height){q.style("width",o.width+"px").style("height",o.height+"px")}}var y=this.get_visible_rect(q,true),v=q.attr("can_resize"),z=false;if(v=="height"){if(u&&Math.abs(y.width*u-y.height)>0.1*y.width){z=true}}if(((y.height<=t)||(y.width<=t))&&v&&v!=="false"){z=true}if(z&&(s!=="on")){if(y.width>t){u=u||0.66;q.style("height",Math.round(y.width*u)+"px")}else{if(v!=="height"){q.style("width","200px").style("height","100px")}}}var x=this.get_visible_rect(r),p=r.property("draw_height"),w=r.property("draw_width");x.changed=false;if(p&&w&&(p>0)&&(w>0)){if((p!==x.height)||(w!==x.width)){if((A>1)||(x.width/w<0.66)||(x.width/w>1.5)||(x.height/p<0.66)&&(x.height/p>1.5)){x.changed=true}}}else{x.changed=true}return x};l.prototype.enlarge_main=function(v,s){var o=this.select_main(true),r=this.select_main("origin");if(o.empty()||!b.gStyle.CanEnlarge||(r.property("can_enlarge")===false)){return false}if(v===undefined){return true}if(v==="verify"){return true}var u=r.property("use_enlarge")?"on":"off";if(v==="state"){return u}if(v==="toggle"){v=(u==="off")}var t=n.select("#jsroot_enlarge_div");if((v===true)&&(u!=="on")){if(!t.empty()){return false}t=n.select(document.body).append("div").attr("id","jsroot_enlarge_div");var q=this.get_visible_rect(o),p=this.get_visible_rect(t);if((p.width<=q.width)||(p.height<=q.height)){if(p.width*p.height<q.width*q.height){if(!s){console.log("Enlarged area "+p.width+"x"+p.height+" smaller then original drawing "+q.width+"x"+q.height)}t.remove();return false}}while(o.node().childNodes.length>0){t.node().appendChild(o.node().firstChild)}r.property("use_enlarge",true);return true}if((v===false)&&(u!=="off")){while(t.node()&&t.node().childNodes.length>0){o.node().appendChild(t.node().firstChild)}t.remove();r.property("use_enlarge",false);return true}return false};l.prototype.GetStyleValue=function(p,o){if(!p||p.empty()){return 0}var q=p.style(o);if(!q||(typeof q!=="string")){return 0}q=parseFloat(q.replace("px",""));return isNaN(q)?0:Math.round(q)};l.prototype.get_visible_rect=function(r,o){if(b.nodejs){return{width:parseInt(r.attr("width")),height:parseInt(r.attr("height"))}}var q=r.node().getBoundingClientRect(),p={width:Math.round(q.width),height:Math.round(q.height)};if(!o){p.width-=this.GetStyleValue(r,"padding-left")+this.GetStyleValue(r,"padding-right");p.height-=this.GetStyleValue(r,"padding-top")-this.GetStyleValue(r,"padding-bottom")}return p};l.prototype.SetDivId=function(o){if(arguments.length>0){this.divid=o}this.AccessTopPainter(true)};l.prototype.SetItemName=function(o,p,q){if(typeof o==="string"){this._hitemname=o}else{delete this._hitemname}if(typeof p==="string"){this._hdrawopt=p}this._hpainter=q};l.prototype.GetItemName=function(){return("_hitemname" in this)?this._hitemname:null};l.prototype.GetItemDrawOpt=function(){return("_hdrawopt" in this)?this._hdrawopt:""};l.prototype.CanZoomIn=function(p,q,o){return false};function e(o){l.call(this);this.draw_g=null;this.pad_name="";this.main=null;this.draw_object=((o!==undefined)&&(typeof o=="object"))?o:null}e.prototype=Object.create(l.prototype);e.prototype.Cleanup=function(){this.RemoveDrawG();var p=true;if(this.is_main_painter()){var o=this.pad_painter();if(!o||o.normal_canvas===false){p=false}}this.pad_name="";this.main=null;this.draw_object=null;delete this.fillatt;delete this.lineatt;delete this.markeratt;delete this.bins;delete this.root_colors;delete this.options;delete this.options_store;l.prototype.Cleanup.call(this,p)};e.prototype.GetObject=function(){return this.draw_object};e.prototype.GetClassName=function(){var o=this.draw_object?this.draw_object._typename:"";return o||""};e.prototype.MatchObjectType=function(o){if(!o||!this.draw_object){return false}if(typeof o==="string"){return(this.draw_object._typename===o)}if(o._typename){return(this.draw_object._typename===o._typename)}return this.draw_object._typename.match(o)};e.prototype.SetItemName=function(o,p,r){l.prototype.SetItemName.call(this,o,p,r);if(this.no_default_title||(o=="")){return}var q=this.svg_canvas();if(!q.empty()){q.select("title").text(o)}else{this.select_main().attr("title",o)}};e.prototype.OptionsStore=function(o){if(!this.options){return}this.options.original=o||"";this.options_store=b.extend({},this.options)};e.prototype.OptionesChanged=function(){if(!this.options){return false}if(!this.options_store){return true}for(var o in this.options){if(this.options[o]!==this.options_store[o]){return true}}return false};e.prototype.OptionsAsString=function(){if(!this.options){return""}if(!this.OptionesChanged()){return this.options.original||""}if(typeof this.options.asString=="function"){return this.options.asString()}return this.options.original||""};e.prototype.UpdateObject=function(o){if(!this.MatchObjectType(o)){return false}b.extend(this.GetObject(),o);return true};e.prototype.GetTipName=function(o){var p=this.GetItemName(),q=this.GetObject();if(p===null){p=""}if((p.length===0)&&q&&q.fName){p=this.GetObject().fName}if(p.lenght>20){p=p.substr(0,17)+"..."}if((p.length>0)&&(o!==undefined)){p+=o}return p};e.prototype.pad_painter=function(o){var p=this.svg_pad(typeof o=="string"?o:undefined);return p.empty()?null:p.property("pad_painter")};e.prototype.canv_painter=function(){var o=this.svg_canvas();return o.empty()?null:o.property("pad_painter")};e.prototype.get_color=function(q){var p=this.root_colors;if(!p){var o=this.canv_painter();p=this.root_colors=(o&&o.root_colors)?o.root_colors:b.Painter.root_colors}return p[q]};e.prototype.add_color=function(p){var q=this.root_colors;if(!q){var o=this.canv_painter();q=this.root_colors=(o&&o.root_colors)?o.root_colors:b.Painter.root_colors}var r=q.indexOf(p);if(r>=0){return r}q.push(p);return q.length-1};e.prototype.CheckResize=function(o){var p=this.canv_painter();if(!p){return false}p.CheckCanvasResize(o);return true};e.prototype.RemoveDrawG=function(){if(this.draw_g){this.draw_g.remove();this.draw_g=null}};e.prototype.RecreateDrawG=function(p,o){console.warn("Obsolete RecreateDrawG is used, will be removed soon. Change to CreateG");return this.CreateG(p?undefined:o)};e.prototype.CreateG=function(r){if(this.draw_g){this.draw_g.selectAll("*").remove()}else{if(r){var s=this.svg_frame();if(s.empty()){return s}if(typeof r!="string"){r="main_layer"}var q=s.select("."+r);if(q.empty()){q=s.select(".main_layer")}this.draw_g=q.append("svg:g")}else{var q=this.svg_layer("primitives_layer");this.draw_g=q.append("svg:g");var p=[],o=q.node().childNodes;for(var t=0;t<o.length;++t){if(n.select(o[t]).classed("most_upper_primitives")){p.push(o[t])}}p.forEach(function(u){n.select(u).raise()})}}if(this.draw_object){this.draw_g.attr("objname",encodeURI(this.draw_object.fName||"name"));this.draw_g.attr("objtype",encodeURI(this.draw_object._typename||"type"))}return this.draw_g};e.prototype.svg_canvas=function(){return this.select_main().select(".root_canvas")};e.prototype.svg_pad=function(o){if(o===undefined){o=this.pad_name}var p=this.svg_canvas();if(o&&!p.empty()){p=p.select(".primitives_layer .__root_pad_"+o)}return p};e.prototype.svg_layer=function(q,p){var o=this.svg_pad(p);if(o.empty()){return o}if(q.indexOf("prim#")==0){o=o.select(".primitives_layer");q=q.substr(5)}var s=o.node().firstChild;while(s!==null){var r=n.select(s);if(r.classed(q)){return r}s=s.nextSibling}return n.select(null)};e.prototype.CurrentPadName=function(p){var o=this.svg_canvas();if(o.empty()){return""}var q=o.property("current_pad");if(p!==undefined){o.property("current_pad",p)}return q};e.prototype.root_pad=function(){var o=this.pad_painter();return o?o.pad:null};e.prototype.ConvertToNDC=function(p,q,o){if(o){return q}var r=this.root_pad();if(!r){return q}if(p=="y"){if(r.fLogy){q=(q>0)?b.log10(q):r.fUymin}return(q-r.fY1)/(r.fY2-r.fY1)}if(r.fLogx){q=(q>0)?b.log10(q):r.fUxmin}return(q-r.fX1)/(r.fX2-r.fX1)};e.prototype.AxisToSvg=function(q,r,p){var o=this.frame_painter();if(o&&!p){r=(q=="y")?o.gry(r)+o.frame_y():o.grx(r)+o.frame_x()}else{if(p!==true){r=this.ConvertToNDC(q,r)}r=(q=="y")?(1-r)*this.pad_height():r*this.pad_width()}return Math.round(r)};e.prototype.svg_frame=function(o){return this.svg_layer("primitives_layer",o).select(".root_frame")};e.prototype.pad_width=function(o){var p=this.svg_pad(o);p=p.empty()?0:p.property("draw_width");return isNaN(p)?0:p};e.prototype.pad_height=function(o){var p=this.svg_pad(o);p=p.empty()?0:p.property("draw_height");return isNaN(p)?0:p};e.prototype.frame_painter=function(){var o=this.pad_painter();return o?o.frame_painter_ref:null};e.prototype.frame_property=function(p){var o=this.frame_painter();return o&&o[p]?o[p]:0};e.prototype.frame_x=function(){return this.frame_property("_frame_x")};e.prototype.frame_y=function(){return this.frame_property("_frame_y")};e.prototype.frame_width=function(){return this.frame_property("_frame_width")};e.prototype.frame_height=function(){return this.frame_property("_frame_height")};e.prototype.embed_3d=function(){if(b.BatchMode){return 3}if(b.gStyle.Embed3DinSVG<2){return b.gStyle.Embed3DinSVG}if(b.browser.isFirefox){return b.gStyle.Embed3DinSVG}return 1};e.prototype.access_3d_kind=function(p){var o=this.svg_pad(this.this_pad_name);if(o.empty()){return -1}var q=o.property("can3d");if(p!==undefined){o.property("can3d",p)}return((q===null)||(q===undefined))?-1:q};e.prototype.size_for_3d=function(x){if(x===undefined){x=this.embed_3d()}var q=this.svg_pad(this.this_pad_name),p="draw3d_"+(this.this_pad_name||this.pad_name||"canvas");if(q.empty()){var v=this.get_visible_rect(this.select_main());if((v.height<10)&&(v.width>10)){v.height=Math.round(0.66*v.width);this.select_main().style("height",v.height+"px")}v.x=0;v.y=0;v.clname=p;v.can3d=-1;return v}var r=q,t=this.frame_painter();if(x===0){r=this.svg_canvas()}var y={x:0,y:0,width:100,height:100,clname:p,can3d:x};if(t&&!t.mode3d){r=this.svg_frame();y.x=r.property("draw_x");y.y=r.property("draw_y")}y.width=r.property("draw_width");y.height=r.property("draw_height");if((!t||t.mode3d)&&(x>0)){y.x=Math.round(y.x+y.width*b.gStyle.fPadLeftMargin);y.y=Math.round(y.y+y.height*b.gStyle.fPadTopMargin);y.width=Math.round(y.width*(1-b.gStyle.fPadLeftMargin-b.gStyle.fPadRightMargin));y.height=Math.round(y.height*(1-b.gStyle.fPadTopMargin-b.gStyle.fPadBottomMargin))}var w=this.pad_width(this.this_pad_name),o=w-y.x-y.width,s=this.pad_height(this.this_pad_name),u=s-y.y-y.height;if((o>=0)&&(u>=0)){y.x=Math.round(y.x*0.3);y.y=Math.round(y.y*0.9);y.width=w-y.x-Math.round(o*0.3);y.height=s-y.y-Math.round(u*0.5)}if(x===1){this.CalcAbsolutePosition(this.svg_pad(this.this_pad_name),y)}return y};e.prototype.clear_3d_canvas=function(){var p=this.access_3d_kind(null);if(p<0){return}var o=this.size_for_3d(p);if(o.can3d===0){n.select(this.svg_canvas().node().nextSibling).remove();this.svg_canvas().style("display",null)}else{if(this.svg_pad(this.this_pad_name).empty()){return}this.apply_3d_size(o).remove();this.svg_frame().style("display",null)}};e.prototype.add_3d_canvas=function(p,r){if(!r||(p.can3d<-1)){return}if(p.can3d===-1){var o=this.select_main().node();if(o!==null){o.appendChild(r);r.painter=this}return}this.access_3d_kind(p.can3d);if(p.can3d===0){this.svg_canvas().style("display","none");this.svg_canvas().node().parentNode.appendChild(r)}else{if(this.svg_pad(this.this_pad_name).empty()){return}this.svg_frame().style("display","none");var q=this.apply_3d_size(p);q.attr("title","").node().appendChild(r)}};e.prototype.apply_3d_size=function(x,o){if(x.can3d<0){return n.select(null)}var p;if(x.can3d>1){p=this.svg_layer(x.clname);if(o){return p}var t=this.svg_pad();if(x.can3d===3){if(p.empty()){p=t.insert("g",".primitives_layer").attr("class",x.clname)}p.attr("transform","translate("+x.x+","+x.y+")")}else{if(p.empty()){p=t.insert("foreignObject",".primitives_layer").attr("class",x.clname)}p.attr("x",x.x).attr("y",x.y).attr("width",x.width).attr("height",x.height).attr("viewBox","0 0 "+x.width+" "+x.height).attr("preserveAspectRatio","xMidYMid")}}else{var q=this.svg_canvas().node().parentNode;p=n.select(q).select("."+x.clname);if(o){return p}this.svg_canvas().property("redraw_by_resize",true);if(p.empty()){p=n.select(q).append("div").attr("class",x.clname+" jsroot_noselect")}var w=q.getBoundingClientRect();while(q){if(q===document){q=null;break}try{if(getComputedStyle(q).position!=="static"){break}}catch(r){break}q=q.parentNode}var v=q?q.getBoundingClientRect():{top:0,left:0};var u=Math.round(w.left-v.left),s=Math.round(w.top-v.top);p.style("position","absolute").style("left",(x.x+u)+"px").style("top",(x.y+s)+"px").style("width",x.width+"px").style("height",x.height+"px")}return p};e.prototype.main_painter=function(r,p){var q=this.main;if(!q){var o=this.svg_pad(p);if(o.empty()){q=this.AccessTopPainter()}else{q=o.property("mainpainter")}if(!q){q=null}if(!r){this.main=q}}return q};e.prototype.is_main_painter=function(){return this===this.main_painter()};e.prototype.SetDivId=function(s,r,q){if(s!==undefined){this.divid=s}if(!r){r=0}if((r>=0)&&this.select_main(true).empty()){if(typeof s=="string"){console.error("element with id "+s+" not exists")}else{console.error("specified HTML element can not be selected with d3.select()")}return}this.create_canvas=false;var p=this.svg_canvas();if(p.empty()&&(r>0)&&(r!==5)){b.Painter.drawCanvas(s,null,((r==2)||(r==4))?"noframe":"");p=this.svg_canvas();this.create_canvas=true}if(p.empty()){if((r<0)||(r===5)||this.iscan){return}this.AccessTopPainter(true);return}this.pad_name=q;if(this.pad_name===undefined){this.pad_name=this.CurrentPadName()}if(r<0){return}if(this.svg_frame().select(".main_layer").empty()&&((r==1)||(r==3)||(r==4))){if(typeof b.Painter.drawFrame=="function"){b.Painter.drawFrame(s,null,(r==4)?"3d":"")}if((r!=4)&&this.svg_frame().empty()){return alert("Fail to draw dummy TFrame")}}var o=this.svg_pad();if(o.empty()){return}if(o.property("pad_painter")!==this){o.property("pad_painter").painters.push(this)}if(((r===1)||(r===4)||(r===5))&&!o.property("mainpainter")){o.property("mainpainter",this)}};e.prototype.CalcAbsolutePosition=function(p,q){while(!p.empty()&&!p.classed("root_canvas")){var o=p.attr("class");if(o&&((o.indexOf("root_frame")>=0)||(o.indexOf("__root_pad_")>=0))){q.x+=p.property("draw_x")||0;q.y+=p.property("draw_y")||0}p=n.select(p.node().parentNode)}return q};e.prototype.createAttMarker=function(o){if(!o||(typeof o!=="object")){o={std:true}}else{if(o.fMarkerColor!==undefined&&o.fMarkerStyle!==undefined&&o.fMarkerSize!==undefined){o={attr:o,std:false}}}if(o.std===undefined){o.std=true}var p=o.std?this.markeratt:null;if(!p){p=new g(o)}else{if(!p.changed){p.SetArgs(o)}}if(o.std){this.markeratt=p}return p};e.prototype.createAttLine=function(o){if(!o||(typeof o!=="object")){o={std:true}}else{if(o.fLineColor!==undefined&&o.fLineStyle!==undefined&&o.fLineWidth!==undefined){o={attr:o,std:false}}}if(o.std===undefined){o.std=true}var p=o.std?this.lineatt:null;if(!p){p=new d(o)}else{if(!p.changed){p.SetArgs(o)}}if(o.std){this.lineatt=p}return p};e.prototype.createAttFill=function(o){if(!o||(typeof o!=="object")){o={std:true}}else{if(o._typename&&o.fFillColor!==undefined&&o.fFillStyle!==undefined){o={attr:o,std:false}}}if(o.std===undefined){o.std=true}var p=o.std?this.fillatt:null;if(!o.svg){o.svg=this.svg_canvas()}if(!p){p=new i(o)}else{if(!p.changed){p.SetArgs(o)}}if(o.std){this.fillatt=p}return p};l.prototype.AttributeChange=function(q,o,p){};e.prototype.ForEachPainter=function(q,r){var p=this.AccessTopPainter();if(p){if(r!=="pads"){q(p)}return}var o=this.pad_painter();if(o){o.ForEachPainterInPad(q,r)}};e.prototype.InteractiveRedraw=function(o,r){if(o=="pad"){this.RedrawPad()}else{if(o!==true){this.Redraw()}}var q=this.pad_painter();if(q&&q.InteractiveObjectRedraw){q.InteractiveObjectRedraw(this)}var p=this.canv_painter();if(p&&p.ProcessChanges){p.ProcessChanges(r,this.pad_painter())}};e.prototype.RedrawPad=function(){var o=this.pad_painter();if(o){o.Redraw()}};e.prototype.SwitchTooltip=function(o){var p=this.frame_painter();if(p){p.ProcessTooltipEvent(null,o)}if(this.control&&(typeof this.control.SwitchTooltip=="function")){this.control.SwitchTooltip(o)}};e.prototype.AddDrag=function(x){if(!b.gStyle.MoveResize){return}var p=this,q=null;function v(z){if("buttons" in z){return z.buttons===2}else{if("which" in z){return z.which===3}else{if("button" in z){return z.button===2}}}return false}function o(){return Number(p.draw_g.attr("width"))}function y(){return Number(p.draw_g.attr("height"))}function t(D,C,z,B){function A(H,G){var E="js_"+H.replace("-","_"),F=D.select("."+E);if(F.empty()){F=D.append("path").classed(E,true)}F.style("opacity",0).style("cursor",H).attr("d",G);if(B){F.call(B)}}A("nw-resize","M2,2h15v-5h-20v20h5Z");A("ne-resize","M"+(C-2)+",2h-15v-5h20v20h-5 Z");A("sw-resize","M2,"+(z-2)+"h15v5h-20v-20h5Z");A("se-resize","M"+(C-2)+","+(z-2)+"h-15v5h20v-20h-5Z");A("w-resize","M-3,18h5v"+Math.max(0,z-2*18)+"h-5Z");A("e-resize","M"+(C+3)+",18h-5v"+Math.max(0,z-2*18)+"h5Z");A("n-resize","M18,-3v5h"+Math.max(0,C-2*18)+"v-5Z");A("s-resize","M18,"+(z+3)+"v-5h"+Math.max(0,C-2*18)+"v5Z")}function r(){q.style("cursor","auto");if(!p.draw_g){q.remove();q=null;return false}var D=Number(p.draw_g.attr("x")),C=Number(p.draw_g.attr("y")),G=Number(q.attr("x")),F=Number(q.attr("y")),z=Number(q.attr("width")),A=Number(q.attr("height"));if(x.minwidth&&z<x.minwidth){z=x.minwidth}if(x.minheight&&A<x.minheight){A=x.minheight}var B=(z!==o())||(A!==y()),E=(G!==D)||(F!==C);p.draw_g.attr("x",G).attr("y",F).attr("transform","translate("+G+","+F+")").attr("width",z).attr("height",A);q.remove();q=null;p.SwitchTooltip(true);t(p.draw_g,z,A);if(B||E){if(B&&("resize" in x)){x.resize(z,A)}if(E&&("move" in x)){x.move(G,F,G-oldxx,F-C)}if(B||E){if("obj" in x){x.obj.fX1NDC=G/p.pad_width();x.obj.fX2NDC=(G+z)/p.pad_width();x.obj.fY1NDC=1-(F+A)/p.pad_height();x.obj.fY2NDC=1-F/p.pad_height();x.obj.modified_NDC=true}if("redraw" in x){x.redraw()}}}return B||E}var s="",w,u;if(b._test_d3_===3){s="drag";w=n.behavior.drag().origin(Object);u=n.behavior.drag().origin(Object)}else{w=n.drag().subject(Object);u=n.drag().subject(Object)}w.on(s+"start",function(){if(v(n.event.sourceEvent)){return}b.Painter.closeMenu();p.SwitchTooltip(false);n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation();var z={acc_x1:Number(p.draw_g.attr("x")),acc_y1:Number(p.draw_g.attr("y")),pad_w:p.pad_width()-o(),pad_h:p.pad_height()-y(),drag_tm:new Date()};q=n.select(p.draw_g.node().parentNode).append("rect").classed("zoom",true).attr("x",z.acc_x1).attr("y",z.acc_y1).attr("width",o()).attr("height",y()).style("cursor","move").style("pointer-events","none").property("drag_handle",z)}).on("drag",function(){if(!q){return}n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation();var z=q.property("drag_handle");z.acc_x1+=n.event.dx;z.acc_y1+=n.event.dy;q.attr("x",Math.min(Math.max(z.acc_x1,0),z.pad_w)).attr("y",Math.min(Math.max(z.acc_y1,0),z.pad_h))}).on(s+"end",function(){if(!q){return}n.event.sourceEvent.preventDefault();var z=q.property("drag_handle");if(r()===false){var B=(new Date()).getTime()-z.drag_tm.getTime();if(x.ctxmenu&&(B>600)){var A=resize_se.node().getBoundingClientRect();p.ShowContextMenu("main",{clientX:A.left,clientY:A.top})}else{if(x.canselect&&(B<=600)){p.canv_painter().SelectObjectPainter(p)}}}});u.on(s+"start",function(){if(v(n.event.sourceEvent)){return}n.event.sourceEvent.stopPropagation();n.event.sourceEvent.preventDefault();p.SwitchTooltip(false);var z={acc_x1:Number(p.draw_g.attr("x")),acc_y1:Number(p.draw_g.attr("y")),pad_w:p.pad_width(),pad_h:p.pad_height()};z.acc_x2=z.acc_x1+o();z.acc_y2=z.acc_y1+y();q=n.select(p.draw_g.node().parentNode).append("rect").classed("zoom",true).style("cursor",n.select(this).style("cursor")).attr("x",z.acc_x1).attr("y",z.acc_y1).attr("width",z.acc_x2-z.acc_x1).attr("height",z.acc_y2-z.acc_y1).property("drag_handle",z)}).on("drag",function(){if(!q){return}n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation();var G=q.property("drag_handle"),B=n.event.dx,z=n.event.dy,F=n.select(this);if(F.classed("js_nw_resize")){G.acc_x1+=B;G.acc_y1+=z}else{if(F.classed("js_ne_resize")){G.acc_x2+=B;G.acc_y1+=z}else{if(F.classed("js_sw_resize")){G.acc_x1+=B;G.acc_y2+=z}else{if(F.classed("js_se_resize")){G.acc_x2+=B;G.acc_y2+=z}else{if(F.classed("js_w_resize")){G.acc_x1+=B}else{if(F.classed("js_n_resize")){G.acc_y1+=z}else{if(F.classed("js_e_resize")){G.acc_x2+=B}else{if(F.classed("js_s_resize")){G.acc_y2+=z}}}}}}}}var C=Math.max(0,G.acc_x1),A=Math.min(G.acc_x2,G.pad_w),E=Math.max(0,G.acc_y1),D=Math.min(G.acc_y2,G.pad_h);q.attr("x",C).attr("y",E).attr("width",Math.max(0,A-C)).attr("height",Math.max(0,D-E))}).on(s+"end",function(){if(!q){return}n.event.sourceEvent.preventDefault();r()});if(!x.only_resize){this.draw_g.style("cursor","move").call(w)}t(this.draw_g,o(),y(),u)};e.prototype.startTouchMenu=function(q){var o=n.touches(this.svg_frame().node());if(o.length!=1){return}if(!q||(q=="")){q="main"}var p="touch_"+q;n.event.preventDefault();n.event.stopPropagation();this[p]={dt:new Date(),pos:o[0]};this.svg_frame().on("touchcancel",this.endTouchMenu.bind(this,q)).on("touchend",this.endTouchMenu.bind(this,q))};e.prototype.endTouchMenu=function(p){var o="touch_"+p;if(!(o in this)){return}n.event.preventDefault();n.event.stopPropagation();var r=new Date().getTime()-this[o].dt.getTime();this.svg_frame().on("touchcancel",null).on("touchend",null);if(r>500){var q=this.svg_frame().node().getBoundingClientRect();this.ShowContextMenu(p,{clientX:q.left+this[o].pos[0],clientY:q.top+this[o].pos[1]})}delete this[o]};e.prototype.AddColorMenuEntry=function(q,p,v,u,o){if(v===undefined){return}q.add("sub:"+p,function(){var y=(typeof v!=="string");var x=prompt("Enter color "+(y?"(only id number)":"(name or id)"),v);if(x==null){return}var z=parseInt(x);if(!isNaN(z)&&(b.Painter.root_colors[z]!==undefined)){x=b.Painter.root_colors[z]}else{if(y){return}}u.bind(this)(y?z:x)});var w=(typeof v!=="string");for(var r=-1;r<11;++r){if((r<0)&&w){continue}if((r==10)&&(o!==1)){continue}var s=(r<0)?"none":b.Painter.root_colors[r];if((r==0)&&(o==1)){s="none"}var t="<svg width='100' height='18' style='margin:0px;background-color:"+s+"'><text x='4' y='12' style='font-size:12px' fill='"+(r==1?"white":"black")+"'>"+s+"</text></svg>";q.addchk((v==(w?r:s)),t,(w?r:s),u)}q.add("endsub:")};e.prototype.AddSizeMenuEntry=function(p,o,s,u,r,w,t){if(w===undefined){return}p.add("sub:"+o,function(){var x=w.toFixed(4);if(r>=0.1){x=w.toFixed(2)}if(r>=1){x=w.toFixed(0)}var y=prompt("Enter value of "+o,x);if(y==null){return}var y=parseFloat(y);if(!isNaN(y)){t.bind(this)((r>=1)?Math.round(y):y)}});for(var q=s;q<=u;q+=r){var v=q.toFixed(2);if(r>=0.1){v=q.toFixed(1)}if(r>=1){v=q.toFixed(0)}p.addchk((Math.abs(w-q)<r/2),v,q,t)}p.add("endsub:")};e.prototype.ExecuteMenuCommand=function(p){if(p.fName=="Inspect"){this.ShowInpsector();return true}var o=this.canv_painter();if(!o){return false}if((p.fName=="FitPanel")&&o.ActivateFitPanel){o.ActivateFitPanel(this);return true}if(o.ActivateGed&&((p.fName=="DrawPanel")||(p.fName=="SetLineAttributes")||(p.fName=="SetFillAttributes")||(p.fName=="SetMarkerAttributes"))){o.ActivateGed(this);return true}return false};e.prototype.FillObjectExecMenu=function(u,q,s){var t=this.canv_painter();if(!this.snapid||!t||!t._websocket||t._getmenu_callback){return b.CallBack(s)}function o(v){var x=this.canv_painter(),w=this.args_menu_items[parseInt(v)];if(!w||!w.fName){return}if(x.MethodsDialog&&(w.fArgs!==undefined)){return x.MethodsDialog(this,w,this.args_menu_id)}if(this.ExecuteMenuCommand(w)){return}if(x._websocket&&this.args_menu_id){console.log("execute method "+w.fExec+" for object "+this.args_menu_id);x.SendWebsocket("OBJEXEC:"+this.args_menu_id+":"+w.fExec)}}function r(A,v,z,w,B){if(!t._getmenu_callback){return}delete t._getmenu_callback;if(v!==B){console.error("missmatch between request "+v+" and reply "+B+" identifiers")}if(w&&w.length){A.add("separator");A.add("sub:Online");this.args_menu_items=w;this.args_menu_id=B;var x;for(var C=0;C<w.length;++C){var y=w[C];if(y.fClassName&&x&&(x!=y.fClassName)){A.add("separator")}x=y.fClassName;if((y.fChecked===undefined)||(y.fChecked<0)){A.add(y.fName,C,o)}else{A.addchk(y.fChecked,y.fName,C,o)}}A.add("endsub:")}b.CallBack(z)}var p=this.snapid;if(q){p+="#"+q}t._getmenu_callback=r.bind(this,u,p,s);t.SendWebsocket("GETMENU:"+p);setTimeout(t._getmenu_callback,2000)};e.prototype.DeleteAtt=function(){delete this.lineatt;delete this.fillatt;delete this.markeratt};e.prototype.FillAttContextMenu=function(p,v){if(!v){v=""}if(this.lineatt&&this.lineatt.used){p.add("sub:"+v+"Line att");this.AddSizeMenuEntry(p,"width",1,10,1,this.lineatt.width,function(x){this.lineatt.Change(undefined,parseInt(x));this.InteractiveRedraw()}.bind(this));this.AddColorMenuEntry(p,"color",this.lineatt.color,function(x){this.lineatt.Change(x);this.InteractiveRedraw()}.bind(this));p.add("sub:style",function(){var x=prompt("Enter line style id (1-solid)",1);if(x==null){return}x=parseInt(x);if(isNaN(x)||!b.Painter.root_line_styles[x]){return}this.lineatt.Change(undefined,undefined,x);this.InteractiveRedraw()}.bind(this));for(var q=1;q<11;++q){var r=b.Painter.root_line_styles[q];var s="<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>"+q+"</text><line x1='30' y1='8' x2='100' y2='8' stroke='black' stroke-width='3' stroke-dasharray='"+r+"'></line></svg>";p.addchk((this.lineatt.style==q),s,q,function(x){this.lineatt.Change(undefined,undefined,parseInt(x));this.InteractiveRedraw()}.bind(this))}p.add("endsub:");p.add("endsub:");if(("excl_side" in this.lineatt)&&(this.lineatt.excl_side!==0)){p.add("sub:Exclusion");p.add("sub:side");for(var t=-1;t<=1;++t){p.addchk((this.lineatt.excl_side==t),t,t,function(x){this.lineatt.ChangeExcl(parseInt(x));this.InteractiveRedraw()}.bind(this))}p.add("endsub:");this.AddSizeMenuEntry(p,"width",10,100,10,this.lineatt.excl_width,function(x){this.lineatt.ChangeExcl(undefined,parseInt(x));this.InteractiveRedraw()}.bind(this));p.add("endsub:")}}if(this.fillatt&&this.fillatt.used){p.add("sub:"+v+"Fill att");this.AddColorMenuEntry(p,"color",this.fillatt.colorindx,function(x){this.fillatt.Change(parseInt(x),undefined,this.svg_canvas());this.InteractiveRedraw()}.bind(this),this.fillatt.kind);p.add("sub:style",function(){var x=prompt("Enter fill style id (1001-solid, 3000..3010)",this.fillatt.pattern);if(x==null){return}x=parseInt(x);if(isNaN(x)){return}this.fillatt.Change(undefined,x,this.svg_canvas());this.InteractiveRedraw()}.bind(this));var o=[1,1001,3001,3002,3003,3004,3005,3006,3007,3010,3021,3022];for(var q=0;q<o.length;++q){var w=this.createAttFill({std:false,pattern:o[q],color:this.fillatt.colorindx||1}),s="<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>"+o[q].toString()+"</text><rect x='40' y='0' width='60' height='18' stroke='none' fill='"+w.fillcolor()+"'></rect></svg>";p.addchk(this.fillatt.pattern==o[q],s,o[q],function(x){this.fillatt.Change(undefined,parseInt(x),this.svg_canvas());this.InteractiveRedraw()}.bind(this))}p.add("endsub:");p.add("endsub:")}if(this.markeratt&&this.markeratt.used){p.add("sub:"+v+"Marker att");this.AddColorMenuEntry(p,"color",this.markeratt.color,function(x){this.markeratt.Change(x);this.InteractiveRedraw()}.bind(this));this.AddSizeMenuEntry(p,"size",0.5,6,0.5,this.markeratt.size,function(x){this.markeratt.Change(undefined,undefined,parseFloat(x));this.InteractiveRedraw()}.bind(this));p.add("sub:style");var o=[1,2,3,4,5,6,7,8,21,22,23,24,25,26,27,28,29,30,31,32,33,34];for(var q=0;q<o.length;++q){var u=new g({style:o[q],color:this.markeratt.color,size:1.7}),s="<svg width='60' height='18'><text x='1' y='12' style='font-size:12px'>"+o[q].toString()+"</text><path stroke='black' fill='"+(u.fill?"black":"none")+"' d='"+u.create(40,8)+"'></path></svg>";p.addchk(this.markeratt.style==o[q],s,o[q],function(x){this.markeratt.Change(undefined,parseInt(x));this.InteractiveRedraw()}.bind(this))}p.add("endsub:");p.add("endsub:")}};e.prototype.TextAttContextMenu=function(s,q){var r=this.GetObject();if(!r||!("fTextColor" in r)){return}s.add("sub:"+(q?q:"Text"));this.AddColorMenuEntry(s,"color",r.fTextColor,function(v){this.GetObject().fTextColor=parseInt(v);this.InteractiveRedraw()}.bind(this));var u=[11,12,13,21,22,23,31,32,33],p=["left","centered","right"],o=["bottom","centered","top"];s.add("sub:align");for(var t=0;t<u.length;++t){s.addchk(u[t]==r.fTextAlign,u[t],u[t],function(v){this.GetObject().fTextAlign=parseInt(v);this.InteractiveRedraw()}.bind(this))}s.add("endsub:");s.add("sub:font");for(var t=1;t<16;++t){s.addchk(t==Math.floor(r.fTextFont/10),t,t,function(v){this.GetObject().fTextFont=parseInt(v)*10+2;this.InteractiveRedraw()}.bind(this))}s.add("endsub:");s.add("endsub:")};e.prototype.ShowInpsector=function(){b.draw(this.divid,this.GetObject(),"inspect")};e.prototype.FillContextMenu=function(p){var o=this.GetTipName();if(this.GetObject()&&("_typename" in this.GetObject())){o=this.GetObject()._typename+"::"+o}p.add("header:"+o);this.FillAttContextMenu(p);if(p.size()>0){p.add("Inspect",this.ShowInpsector)}return p.size()>0};e.prototype.GetShowStatusFunc=function(){var o=this.canv_painter(),p=b.Painter.ShowStatus;if(o&&o.use_openui&&(typeof o.fullShowStatus==="function")){p=o.fullShowStatus.bind(o)}if(p&&(this.enlarge_main("state")==="on")){p=null}return p};e.prototype.ShowObjectStatus=function(){var p=this.GetObject(),o=this.GetShowStatusFunc();if(p&&o){o(this.GetItemName()||p.fName,p.fTitle||p._typename,p._typename)}};e.prototype.FindInPrimitives=function(r){var p=this.pad_painter();if((p===null)||(p.pad===null)){return null}if(p.pad.fPrimitives){for(var q=0;q<p.pad.fPrimitives.arr.length;++q){var o=p.pad.fPrimitives.arr[q];if(("fName" in o)&&(o.fName===r)){return o}}}return null};e.prototype.FindPainterFor=function(p,s,t){var o=this.pad_painter();var r=(o===null)?null:o.painters;if(!r){return null}for(var u=0;u<r.length;++u){var q=r[u].GetObject();if(!q){continue}if(p&&(q===p)){return r[u]}if(!s&&!t){continue}if(s&&(q.fName!==s)){continue}if(t&&(q._typename!==t)){continue}return r[u]}return null};e.prototype.DeleteThis=function(){var o=this.pad_painter();if(o){var p=o.painters.indexOf(this);if(p>=0){o.painters.splice(p,1)}}this.Cleanup()};e.prototype.ConfigureUserTooltipCallback=function(p,o){if((p===undefined)||(typeof p!=="function")){delete this.UserTooltipCallback;return}if(o===undefined){o=500}this.UserTooltipCallback=p;this.UserTooltipTimeout=o};e.prototype.IsUserTooltipCallback=function(){return typeof this.UserTooltipCallback=="function"};e.prototype.ProvideUserTooltip=function(o){if(!this.IsUserTooltipCallback()){return}if(this.UserTooltipTimeout<=0){return this.UserTooltipCallback(o)}if(typeof this.UserTooltipTHandle!="undefined"){clearTimeout(this.UserTooltipTHandle);delete this.UserTooltipTHandle}if(o==null){return this.UserTooltipCallback(o)}this.UserTooltipTHandle=setTimeout(function(p){delete this.UserTooltipTHandle;this.UserTooltipCallback(p)}.bind(this,o),this.UserTooltipTimeout)};e.prototype.Redraw=function(){};e.prototype.StartTextDrawing=function(q,o,s,r){if(!s){s=this.draw_g}var p=(o==="font")?q:b.Painter.getFontDetails(q,o);s.call(p.func);s.property("draw_text_completed",false).property("text_font",p).property("mathjax_use",false).property("text_factor",0).property("max_text_width",0).property("max_font_size",r)};e.prototype.TextScaleFactor=function(p,o){if(!o){o=this.draw_g}if(p&&(p>o.property("text_factor"))){o.property("text_factor",p)}};e.prototype.GetBoundarySizes=function(q){if(q===null){console.warn("empty node in GetBoundarySizes");return{width:0,height:0}}var p=q.getBoundingClientRect();if(parseFloat(p.width)>0){p=q.getBBox()}var o={width:parseInt(p.width),height:parseInt(p.height)};if("left" in p){o.x=parseInt(p.left);o.y=parseInt(p.right)}else{if("x" in p){o.x=parseInt(p.x);o.y=parseInt(p.y)}}return o};e.prototype.FinishTextDrawing=function(w,t){if(!w){w=this.draw_g}if(w.property("draw_text_completed")){b.CallBack(t);return w.property("max_text_width")}if(t){w.node().text_callback=t}var v=null;if(w.property("mathjax_use")){var r=0;v=w.selectAll(".math_svg");v.each(function(){var x=n.select(this);if(x.node().parentNode!==w.node()){return}if(x.select("svg").empty()){r++}});if(r){return}}var u=this,o=0,s=w.property("text_factor"),p=w.property("text_font"),q=p.size;if((s>0)&&((s<0.9)||(s>1))){p.size=Math.floor(p.size/s);if(w.property("max_font_size")&&(p.size>w.property("max_font_size"))){p.size=w.property("max_font_size")}w.call(p.func);q=p.size}if(v){v.each(function(){var D=n.select(this);if(D.node().parentNode!==w.node()){return}var E=D.select("svg");if(E.empty()){console.log("MathJax SVG ouptut error");return}function z(F){if(!F||(typeof F!=="string")){return null}if(F.indexOf("ex")!==F.length-2){return null}F=parseFloat(F.substr(0,F.length-2));return isNaN(F)?null:F*q*0.5}var B=z(E.attr("width")),y=z(E.attr("height")),A=E.attr("style");if(A&&A.indexOf("vertical-align:")==0&&A.indexOf("ex;")==A.length-3){A=z(A.substr(16,A.length-17))}else{A=null}B=(!B||(B<=0.5))?1:Math.round(B);y=(!y||(y<=0.5))?1:Math.round(y);E.attr("width",B).attr("height",y).attr("style",null);if(!b.nodejs){var C=u.GetBoundarySizes(D.node());B=1.05*C.width;y=1.05*C.height}var x=D.property("_arg");x.valign=A;if(x.scale){o=Math.max(o,B/x.width,y/x.height)}})}if(v){v.each(function(){var G=n.select(this);if(G.node().parentNode!==w.node()){return}var E=G.property("_arg"),y=G.select("svg"),D=parseInt(y.attr("width")),C=parseInt(y.attr("height"));if(!isNaN(C)&&!isNaN(D)){if(o>0){D=D/o;C=C/o;y.attr("width",Math.round(D)).attr("height",Math.round(C))}}else{var A=u.GetBoundarySizes(G.node());D=A.width||D||100;C=A.height||C||10}if((o>0)&&E.valign){E.valign=E.valign/o}if(E.valign===null){E.valign=(q-C)/2}var x={x:1,y:1},B="x",z="y";if(E.rotate==180){x.x=x.y=-1}else{if((E.rotate==270)||(E.rotate==90)){x.x=(E.rotate==270)?-1:1;x.y=-x.x;B="y";z="x"}}if(E.align[0]=="middle"){E[B]+=x.x*(E.width-D)/2}else{if(E.align[0]=="end"){E[B]+=x.x*(E.width-D)}}if(E.align[1]=="middle"){E[z]+=x.y*(E.height-C)/2}else{if(E.align[1]=="bottom"){E[z]+=x.y*(E.height-C)}else{if(E.align[1]=="bottom-base"){E[z]+=x.y*(E.height-C-E.valign)}}}var F="translate("+E.x+","+E.y+")";if(E.rotate){F+=" rotate("+E.rotate+")"}G.attr("transform",F).attr("visibility",null).property("_arg",null)})}w.selectAll(".hidden_text").attr("visibility",null).attr("class",null).each(function(){var y=n.select(this),x=y.property("_arg");y.property("_arg",null);if(!x){return}if(b.nodejs){if(x.scale&&(s>0)){x.box.width=x.box.width/s;x.box.height=x.box.height/s}}else{if(!x.plain){x.box=u.GetBoundarySizes(y.node())}}if(x.width){if(x.align[0]=="middle"){x.x+=x.width/2}else{if(x.align[0]=="end"){x.x+=x.width}}}x.dx=x.dy=0;if(x.plain){y.attr("text-anchor",x.align[0])}else{y.attr("text-anchor","start");x.dx=((x.align[0]=="middle")?-0.5:((x.align[0]=="end")?-1:0))*x.box.width}if(x.height){if(x.align[1].indexOf("bottom")===0){x.y+=x.height}else{if(x.align[1]=="middle"){x.y+=x.height/2}}}if(x.plain){if(x.align[1]=="top"){y.attr("dy",".8em")}else{if(x.align[1]=="middle"){if(b.browser.isIE||b.nodejs){y.attr("dy",".4em")}else{y.attr("dominant-baseline","middle")}}}}else{x.dy=((x.align[1]=="top")?(x.top_shift||1):(x.align[1]=="middle")?(x.mid_shift||0.5):0)*x.box.height}if(!x.rotate){x.x+=x.dx;x.y+=x.dy;x.dx=x.dy=0}var A=(x.x||x.y)?"translate("+Math.round(x.x)+","+Math.round(x.y)+")":"";if(x.rotate){A+=" rotate("+Math.round(x.rotate)+")"}if(x.dx||x.dy){A+=" translate("+Math.round(x.dx)+","+Math.round(x.dy)+")"}if(A){y.attr("transform",A)}if(b.browser.isWebKit&&w.node().insertAdjacentHTML&&x.large_latex){var z=y.node().outerHTML;y.remove();w.node().insertAdjacentHTML("beforeend",z)}});if(!t){t=w.node().text_callback}w.node().text_callback=null;w.property("draw_text_completed",true);b.CallBack(t);return w.property("max_text_width")};e.prototype.produceLatex=function(R,ab,N,T){if(!T){T={lvl:0,x:0,y:0,dx:0,dy:-0.1,fsize:N.font_size,parent:null};N.mainnode=R.node()}function K(aj,an){var ao,am,ai,w;if(typeof an=="string"){if(!aj.rect){aj.rect={x:aj.x,y:aj.y,height:0,width:0}}ao=-aj.x;aj.x+=an.length*N.font.aver_width*aj.fsize;am=aj.x;ai=-(aj.y-aj.fsize*1.1);w=aj.y+aj.fsize*0.1}else{if(!aj.rect){aj.rect=b.extend({},an)}ao=-an.x;am=an.x+an.width;ai=-an.y;w=an.y+an.height}var ak=aj.rect;ao+=ak.x;am-=(ak.x+ak.width);ai+=ak.y;w-=(ak.y+ak.height);if(ao>0){ak.x-=ao;ak.width+=ao}if(am>0){ak.width+=am}if(ai>0){ak.y-=ai;ak.height+=ai}if(w>0){ak.height+=w}if(aj.parent){return K(aj.parent,ak)}N.text_rect=ak;var s=ak.height,al=ak.y+ak.height/2;if(s>0){N.mid_shift=-al/s||0.001;N.top_shift=-ak.y/s||0.001}}function ac(w){if(Math.abs(w)<0.01){return null}if(w==Math.round(w)){return Math.round(w)+"em"}var s=w.toFixed(2);if(s.indexOf("0.")==0){s=s.substr(1)}else{if(s.indexOf("-0.")==0){s="-."+s.substr(3)}}if(s[s.length-1]=="0"){s=s.substr(0,s.length-1)}return s+"em"}function W(ai,al,w){if(b.nodejs||!al||al.empty()){return w||{height:0,width:0}}var aj=[],ak=al.node();while(ak&&(ak!=N.mainnode)){aj.push(ak);ak=ak.parentNode}al.selectAll("tspan").each(function(){aj.push(this)});var s=n.select(N.mainnode).selectAll("tspan");if(s.size()>3){N.large_latex=true}s.each(function(){if(aj.indexOf(this)<0){n.select(this).attr("display","none")}});var am=ai.GetBoundarySizes(N.mainnode);s.each(function(){if(aj.indexOf(this)<0){n.select(this).attr("display",null)}});return am}var A=[{name:"#it{"},{name:"#bf{"},{name:"kern[",arg:"float"},{name:"lower[",arg:"float"},{name:"scale[",arg:"float"},{name:"#color[",arg:"int"},{name:"#font[",arg:"int"},{name:"_{"},{name:"^{"},{name:"#bar{",accent:"\u02C9"},{name:"#hat{",accent:"\u02C6"},{name:"#check{",accent:"\u02C7"},{name:"#acute{",accent:"\u02CA"},{name:"#grave{",accent:"\u02CB"},{name:"#dot{",accent:"\u02D9"},{name:"#ddot{",accent:"\u02BA"},{name:"#tilde{",accent:"\u02DC"},{name:"#slash{",accent:"\u2215"},{name:"#vec{",accent:"\u02ED"},{name:"#frac{"},{name:"#splitline{"},{name:"#sqrt[",arg:"int"},{name:"#sqrt{"},{name:"#sum",special:"\u2211",w:0.8,h:0.9},{name:"#int",special:"\u222B",w:0.3,h:1},{name:"#left[",right:"#right]",braces:"[]"},{name:"#left(",right:"#right)",braces:"()"},{name:"#left{",right:"#right}",braces:"{}"},{name:"#left|",right:"#right|",braces:"||"},{name:"#[]{",braces:"[]"},{name:"#(){",braces:"()"},{name:"#{}{",braces:"{}"},{name:"#||{",braces:"||"}];var r=false,Y,x,t,Q,ad,M,G,y=null,z=null;while(ab){Y=ab.length;x=null;t=null;for(ad=0;ad<A.length;++ad){Q=ab.indexOf(A[ad].name);if((Q>=0)&&(Q<Y)){Y=Q;x=A[ad]}}if(!x&&!r){var X=b.Painter.translateLaTeX(ab);if(!T.lvl&&(X==ab)){return 0}K(T,X);if(T.accent&&(X.length==1)){var ae=R.append("svg:tspan").text(X),P=W(this,ae,{width:10000}),V=Math.min(P.width/T.fsize,0.5);R.append("svg:tspan").attr("dx",ac(T.dx-V)).attr("dy",ac(T.dy-0.2)).text(T.accent);T.dy=0.2;T.dx=Math.max(0.2,V-0.2);T.accent=false}else{R.text(X)}return true}if(Y>0){var X=b.Painter.translateLaTeX(ab.substr(0,Y));if(X.length>0){K(T,X);R.append("svg:tspan").attr("dx",ac(T.dx)).attr("dy",ac(T.dy)).text(X);T.dx=T.dy=0}y=null;delete T.special;delete T.next_super_dy}if(!x){return true}ab=ab.substr(Y+x.name.length);G=M=R.append("svg:tspan");z=y;y={lvl:T.lvl+1,x:T.x,y:T.y,fsize:T.fsize,dx:0,dy:0,parent:T};r=true;if(x.arg){Q=ab.indexOf("]{");if(Q<0){console.log("missing argument for ",x.name);return false}t=ab.substr(0,Q);if(x.arg=="int"){t=parseInt(t);if(isNaN(t)){console.log("wrong int argument",ab.substr(0,Q));return false}}else{if(x.arg=="float"){t=parseFloat(t);if(isNaN(t)){console.log("wrong float argument",ab.substr(0,Q));return false}}}ab=ab.substr(Q+2)}var o=T.dy,p=T.dx,O=null,S=1,v="{",F="}";T.dy=T.dx=0;if(x.special){M.attr("dx",ac(p)).attr("dy",ac(o)).text(x.special);p=o=0;T.special=x;var P=W(this,M);if(P.width&&P.height){x.w=P.width/T.fsize;x.h=P.height/T.fsize-0.1}continue}if(x.braces){y.left_cont=M.append("svg:tspan");y.left=y.left_cont.append("svg:tspan").text(x.braces[0]);G=M.append("svg:tspan");y.left_rect={y:T.y-T.fsize*1.1,height:T.fsize*1.2,x:T.x,width:T.fsize*0.6};K(T,y.left_rect);y.braces=x;if(x.right){v=x.name;F=x.right}}else{if(x.accent){y.accent=x.accent}else{switch(x.name){case"#color[":if(this.get_color(t)){M.attr("fill",this.get_color(t))}break;case"#kern[":p+=t;break;case"#lower[":T.dy-=t;o+=t;break;case"scale[":S=t;break;case"#font[":b.Painter.getFontDetails(t).setFont(M,"without-size");break;case"#it{":T.italic=true;O=T;while(O=O.parent){if(O.italic!==undefined){T.italic=!O.italic;break}}M.attr("font-style",T.italic?"italic":"normal");break;case"#bf{":T.bold=true;O=T;while(O=O.parent){if(O.bold!==undefined){T.bold=!O.bold;break}}M.attr("font-weight",T.bold?"bold":"normal");break;case"_{":S=0.6;y.script="sub";if(T.special){T.dx=T.special.w;T.dy=-0.7;p-=T.dx;o-=T.dy}else{p+=0.1*S;o+=0.4*S;y.y+=0.4*y.fsize;T.dy=-0.4*S;if(z&&(z.script==="super")){var P=W(this,z.node,z.rect);y.width_limit=P.width;p-=(P.width/y.fsize+0.1)*S}}break;case"^{":S=0.6;y.script="super";if(T.special){T.dx=T.special.w;T.dy=T.special.h;p-=T.dx;o-=T.dy}else{T.dy=0.6*S;if(T.next_super_dy){T.dy-=T.next_super_dy}p+=0.1*S;o-=T.dy;y.y-=0.4*y.fsize;if(z&&(z.script==="sub")){var P=W(this,z.node,z.rect);y.width_limit=P.width;p-=(P.width/y.fsize+0.1)*S}}break;case"#frac{":case"#splitline{":y.first=M;y.two_lines=true;y.need_middle=(x.name=="#frac{");y.x0=y.x;o-=0.6;T.dy=-0.6;break;case"#sqrt{":t=2;case"#sqrt[":y.square_root=M.append("svg:tspan");y.square_root.append("svg:tspan").text((t==3)?"\u221B":((t==4)?"\u221C":"\u221A"));G=M.append("svg:tspan");y.sqrt_rect={y:T.y-T.fsize*1.1,height:T.fsize*1.2,x:0,width:T.fsize*0.7};K(T,y.sqrt_rect);break}}}if(S!==1){M.attr("font-size",Math.round(S*100)+"%");y.fsize*=S;p=p/S;o=o/S}if(T.special&&!y.script){delete T.special}delete T.next_super_dy;y.node=M;while(true){y.x+=p*y.fsize;y.y+=o*y.fsize;M.attr("dx",ac(p)).attr("dy",ac(o));p=o=0;Q=-1;ad=1;while((ad!=0)&&(++Q<ab.length)){if(ab.indexOf(v,Q)===Q){ad++}else{if(ab.indexOf(F,Q)===Q){ad--}}}if(ad!=0){console.log("mismatch with open "+v+" and close "+F+" braces in Latex",ab);return false}var U=ab.substr(0,Q);if(!this.produceLatex(G,U,N,y)){return false}T.x=y.x;T.y=y.y;T.dx+=y.dx*y.fsize/T.fsize;T.dy+=y.dy*y.fsize/T.fsize;ab=ab.substr(Q+F.length);if(y.width_limit){var P=W(this,G,y.rect);if(P.width<y.width_limit){T.dx+=(y.width_limit-P.width)/T.fsize}delete y.width_limit}if(T.special){var P=W(this,G,y.rect);T.dx-=P.width/T.fsize}if(y.square_root){var H=2,S=1,u=0,q=1,Z=W(this,y.square_root,y.sqrt_rect),ag=W(this,G,y.rect);if((ag.height>Z.height)&&(Z.height>0)){q=ag.height/Z.height*1.2;u=((ag.y+ag.height)-(Z.y+Z.height))/T.fsize/q;y.square_root.style("font-size",Math.round(100*q)+"%").attr("dy",ac(u))}H=ag.width/y.fsize/q;var ah="",af=Math.round(Math.max(H*3,2));while(af--){ah+="\u203E"}y.square_root.append("svg:tspan").attr("dy",ac(-0.25)).text(ah);y.square_root.append("svg:tspan").attr("dy",ac(0.25-u)).attr("dx",ac(-ah.length/3-0.2)).text("\u2009");break}if(y.braces){var Z=W(this,y.left_cont,y.left_rect),ag=W(this,G,y.rect),q=1,L=0;if(1.2*Z.height<ag.height){q=ag.height/Z.height;L=0;y.left.style("font-size",Math.round(100*q)+"%").attr("dy",ac(L));y.left_cont.append("svg:tspan").attr("dx",ac(-0.2)).attr("dy",ac(-L*q)).text("\u2009");T.next_super_dy=-0.3*q}y.left_rect.y=T.y;y.left_rect.height*=q;K(T,y.left_rect);var E=M.append("svg:tspan").attr("dx",ac(T.dx)).attr("dy",ac(T.dy));T.dx=T.dy=0;if(q!=1){E.append("svg:tspan").attr("dx",ac(-0.2)).text("\u2009")}var aa=E.append("svg:tspan").text(y.braces.braces[1]);if(q!=1){aa.style("font-size",Math.round(100*q)+"%").attr("dy",ac(L));T.dy=-L*q}break}if(y.first&&y.second){var J=W(this,y.first,y.rect1),I=W(this,y.second,y.rect),D=J.width/y.fsize,C=I.width/y.fsize,B=Math.max(C,D);if(y.need_middle){B=Math.round(Math.max(B,1)+0.3);var ah="";while(ah.length<B){ah+="\u2014"}R.append("svg:tspan").attr("dx",ac(-0.5*(B+C))).attr("dy",ac(T.dy-0.2)).text(ah);T.dy=0.2;T.dx=0.2}else{T.dx=0.2;if(C<D){T.dx+=0.5*(D-C)}}if(y.need_middle||N.align[0]=="middle"){y.first.attr("dx",ac(0.5*(B-D)));y.second.attr("dx",ac(-0.5*(C+D)))}else{if(N.align[0]=="end"){if(D<C){y.first.attr("dx",ac(C-D))}y.second.attr("dx",ac(-C))}else{y.second.attr("dx",ac(-D))}}delete y.first;delete y.second}if(!y.two_lines){break}if(ab[0]!="{"){console.log("missing { for second line",ab);return false}ab=ab.substr(1);M=G=R.append("svg:tspan");y.two_lines=false;y.rect1=y.rect;delete y.rect;y.x=y.x0;y.second=M;o=T.dy+1.6;T.dy=-0.4;y.dx=y.dy=0}}return true};e.prototype.DrawText=function(x){var w=x.text||"",u=["start","middle"];if(typeof x.align=="string"){u=x.align.split(";");if(u.length==1){u.push("middle")}}else{if(typeof x.align=="number"){if((x.align/10)>=3){u[0]="end"}else{if((x.align/10)>=2){u[0]="middle"}}if((x.align%10)==0){u[1]="bottom"}else{if((x.align%10)==1){u[1]="bottom-base"}else{if((x.align%10)==3){u[1]="top"}}}}}x.draw_g=x.draw_g||this.draw_g;if(x.latex===undefined){x.latex=1}x.align=u;x.x=x.x||0;x.y=x.y||0;x.scale=x.width&&x.height&&!x.font_size;x.width=x.width||0;x.height=x.height||0;if(b.gStyle.MathJax!==undefined){switch(b.gStyle.MathJax){case 0:b.gStyle.Latex=2;break;case 2:b.gStyle.Latex=4;break;default:b.gStyle.Latex=3}delete b.gStyle.MathJax}if(typeof b.gStyle.Latex=="string"){switch(b.gStyle.Latex){case"off":b.gStyle.Latex=0;break;case"symbols":b.gStyle.Latex=1;break;case"MathJax":case"mathjax":case"math":b.gStyle.Latex=3;break;case"AlwaysMathJax":case"alwaysmath":case"alwaysmathjax":b.gStyle.Latex=4;break;default:var p=parseInt(b.gStyle.Latex);b.gStyle.Latex=(!isNaN(p)&&(p>=0)&&(p<=4))?p:2}}var q=x.draw_g.property("text_font"),o=(x.latex==2);if(x.latex===1){o=(b.gStyle.Latex>3)||((b.gStyle.Latex==3)&&b.Painter.isAnyLatex(w))}if(!o||x.nomathjax){var t=x.draw_g.append("svg:text");if(x.color){t.attr("fill",x.color)}if(x.font_size){t.attr("font-size",x.font_size)}else{x.font_size=q.size}x.font=q;x.plain=!x.latex||(b.gStyle.Latex<2)||(this.produceLatex(t,w,x)===0);if(x.plain){if(x.latex&&(b.gStyle.Latex==1)){w=f.translateLaTeX(w)}t.text(w)}x.box=!b.nodejs&&!b.gStyle.ApproxTextSize?this.GetBoundarySizes(t.node()):(x.text_rect||{height:x.font_size*1.2,width:b.Painter.approxTextWidth(q,w)});t.attr("class","hidden_text").attr("visibility","hidden").property("_arg",x);if(x.box.width>x.draw_g.property("max_text_width")){x.draw_g.property("max_text_width",x.box.width)}if(x.scale){this.TextScaleFactor(1.05*x.box.width/x.width,x.draw_g)}if(x.scale){this.TextScaleFactor(1*x.box.height/x.height,x.draw_g)}return x.box.width}var s=b.Painter.translateMath(w,x.latex,x.color,this),y=x.draw_g.append("svg:g").attr("class","math_svg").attr("visibility","hidden").property("_arg",x);x.draw_g.property("mathjax_use",true);if(b.nodejs){if(!b.nodejs_mathjax){b.nodejs_mathjax=require("mathjax-node");b.nodejs_mathjax.config({TeX:{extensions:["color.js"]},SVG:{mtextFontInherit:true,minScaleAdjust:100,matchFontHeight:true,useFontCache:false}});b.nodejs_mathjax.start()}if((s.indexOf("\\(")==0)&&(s.lastIndexOf("\\)")==s.length-2)){s=s.substr(2,s.length-4)}b.nodejs_mathjax.typeset({jsroot_painter:this,jsroot_drawg:x.draw_g,jsroot_fog:y,ex:q.size,math:s,useFontCache:false,useGlobalCache:false,format:"TeX",svg:true},function(A,z){if(!A.errors){z.jsroot_fog.html(A.svg)}else{console.log("MathJax error",z.math);z.jsroot_fog.html("<svg></svg>")}z.jsroot_painter.FinishTextDrawing(z.jsroot_drawg)});return 0}var r=document.createElement("p");n.select(r).style("visibility","hidden").style("overflow","hidden").style("position","absolute").style("font-size",q.size+"px").style("font-family",q.name).html("<mtext>"+s+"</mtext>");document.body.appendChild(r);y.property("_element",r);var v=this;b.AssertPrerequisites("mathjax",function(){MathJax.Hub.Typeset(r,["FinishMathjax",v,x.draw_g,y]);MathJax.Hub.Queue(["FinishMathjax",v,x.draw_g,y])});return 0};e.prototype.FinishMathjax=function(p,r,u){if(r.node().parentNode!==p.node()){return}var q=r.property("_element");if(!q){return}var s=n.select(q).select("svg");if(s.empty()){var t=n.select(q).select("merror");if(t.empty()){return}console.warn("MathJax error",t.text());var o=r.property("_arg");if(o&&o.latex!=2){o.nomathjax=true;r.remove();this.DrawText(o)}else{r.append("svg").attr("width",Math.min(20,t.text().length+5)+"ex").attr("height","3ex").style("vertical-align","0ex").append("text").style("font-size","12px").style("fill","red").attr("x","0").attr("y","2ex").text("Err: "+t.text())}}else{s.remove();r.append(function(){return s.node()})}r.property("_element",null);document.body.removeChild(q);this.FinishTextDrawing(p)};function c(o){b.TObjectPainter.call(this,o);this.tooltip_enabled=true;this.tooltip_allowed=(b.gStyle.Tooltip>0)}c.prototype=Object.create(e.prototype);c.prototype.hints_layer=function(){var o=this.canv_painter();return o?o.svg_layer("info_layer"):n.select(null)};c.prototype.IsTooltipShown=function(){if(!this.tooltip_allowed||!this.tooltip_enabled){return false}var o=this.hints_layer().select(".objects_hints");return o.empty()?false:o.property("hints_pad")==this.pad_name};c.prototype.ProcessTooltipEvent=function(at,C){if(C!==undefined){this.tooltip_enabled=C}if(at&&at.handler){var Y=this.draw_g?this.draw_g.select(".interactive_rect"):null;if(!Y||Y.empty()){at=null}else{if(at.touch){var Z=n.touches(Y.node());at=(Z&&Z.length==1)?{touch:true,x:Z[0][0],y:Z[0][1]}:null}else{var Z=n.mouse(Y.node());at={touch:false,x:Z[0],y:Z[1]}}}}var al=[],ab=0,N=0,U=0,X=false,ao=11,R=3,S=3,A=1.2,J=this.GetFrameRect(),aa=this.pad_width(),H=this.pad_painter(),ar=b.Painter.getFontDetails(160,ao),aj=this.GetShowStatusFunc(),av=!this.tooltip_allowed||!this.tooltip_enabled;if((at===undefined)||(av&&!aj)){at=null}if(at&&av){at.disabled=true}if(H){al=H.GetTooltips(at)}if(at&&at.touch){ao=15}for(var am=0;am<al.length;++am){var Q=al[am];if(!Q){continue}if(!Q.lines||(Q.lines.length===0)){al[am]=null;continue}for(var ap=0;ap<am;++ap){var x=al[ap],V=false;if(!x||(x.lines.length!==Q.lines.length)){continue}for(var an=0;an<Q.lines.length&&!V;++an){if(x.lines[an]!==Q.lines[an]){V=true}}if(!V){al[am]=null;break}}if(!al[am]){continue}ab++;for(var an=0;an<Q.lines.length;++an){N=Math.max(N,Q.lines[an].length)}Q.height=Math.round(Q.lines.length*ao*A+2*R-ao*(A-1));if((Q.color1!==undefined)&&(Q.color1!=="none")){if((U!==0)&&(U!==Q.color1)){X=true}U=Q.color1}}var v=this.hints_layer(),s=v.select(".objects_hints");if(aj){var ad="",I="",au="",Q=null,ah=10000000000,E=null,q=at?Math.round(at.x)+","+Math.round(at.y):"";for(var ap=0;ap<(al?al.length:0);++ap){if(!al[ap]){continue}if(!Q){Q=al[ap]}if(al[ap].exact&&(!Q||!Q.exact)){Q=al[ap];break}if(!at||(al[ap].x===undefined)||(al[ap].y===undefined)){continue}var p=(at.x-al[ap].x)*(at.x-al[ap].x)+(at.y-al[ap].y)*(at.y-al[ap].y);if(p<ah){ah=p;E=al[ap]}}if((!Q||!Q.exact)&&(ah<400)){Q=E}if(Q){I=(Q.lines&&Q.lines.length>1)?Q.lines[0]:Q.name;ad=Q.title||"";au=Q.line;if(!au&&Q.lines){au=Q.lines.slice(1).join(" ")}}aj(I,ad,au,q)}if(!at||av||(al.length===0)||(N===0)||(ab>15)){s.remove();return}if(s.empty()){s=v.append("svg:g").attr("class","objects_hints").style("pointer-events","none")}var aw={x:0,y:0},af=J.transform||"";if(!H.iscan){H.CalcAbsolutePosition(this.svg_pad(),aw);af="translate("+aw.x+","+aw.y+") "+af}s.attr("transform",af).property("last_point",at).property("hints_pad",this.pad_name);var F=s.property("viewmode")||"",aq=0,L=at.x+J.hint_delta_x;if(ab>1){var K=0.5,P=0.5;if(F=="left"){P=0.7}else{if(F=="right"){K=0.3}}if(L<=K*J.width){F="left";L=20}else{if(L>=P*J.width){F="right";L=J.width-60}else{L=s.property("startx")}}}else{F="single";L+=15}if(F!==s.property("viewmode")){s.property("viewmode",F);s.selectAll("*").remove()}var G=10,D=10,t=-1111,ai=-1111,M=-aw.y,T=this.pad_height("")-J.y-aw.y;function o(ay){for(var ax=0;(ax<al.length)&&(ay<T);++ax){var r=al[ax];if(!r){continue}if((r.y>=ay-5)&&(r.y<=ay+r.height+5)){ay=r.y+10;ax=-1}}return ay}for(var am=0;am<al.length;++am){var Q=al[am],O=s.select(".painter_hint_"+am);if(Q===null){O.remove();continue}var ac=O.empty(),w=0,u=0;if(ac){O=s.append("svg:svg").attr("class","painter_hint_"+am).attr("opacity",0).style("overflow","hidden").style("pointer-events","none")}if(F=="single"){G=at.touch?(at.y-Q.height-5):Math.min(at.y+15,T-Q.height-3)+J.hint_delta_y}else{D=o(D);if((t===-1111)&&(ai===-1111)){t=ai=Q.x}t=Math.min(t,Q.x);ai=Math.min(ai,Q.x)}O.attr("x",L).attr("y",G).property("curry",G).property("gapy",D);G+=Q.height+5;D+=Q.height+5;if(!ac){O.selectAll("*").remove()}O.attr("width",60).attr("height",Q.height);var ak=O.append("rect").attr("x",0).attr("y",0).attr("width",60).attr("height",Q.height).attr("fill","lightgrey").style("pointer-events","none");if(ab>1){var z=X?Q.color1:Q.color2;if((z!==undefined)&&(z!=="none")){ak.attr("stroke",z).attr("stroke-width",Q.exact?3:1)}}for(var an=0;an<(Q.lines?Q.lines.length:0);an++){if(Q.lines[an]!==null){var B=O.append("svg:text").attr("text-anchor","start").attr("x",S).attr("y",R+an*ao*A).attr("dy",".8em").attr("fill","black").style("pointer-events","none").call(ar.func).text(Q.lines[an]);var y=this.GetBoundarySizes(B.node());aq=Math.max(aq,y.width)}}function ae(){return function(ay,ax,r){return function(az){return az<0.8?"0":(az-0.8)*5}}}if(ac){if(b.gStyle.TooltipAnimation>0){O.transition().duration(b.gStyle.TooltipAnimation).attrTween("opacity",ae())}else{O.attr("opacity",1)}}}aq+=2*S;var ag=s.selectAll("svg");if((F=="right")&&(L+aq>J.width-20)){L=J.width-aq-20;ag.attr("x",L)}if((F=="single")&&(L+aq>aa-J.x)&&(L>aq+20)){L-=(aq+20);ag.attr("x",L)}if((F!=="single")&&(D<T)&&(D!==G)){if((t<=L+aq+5)&&(ai>=L-5)){ag.attr("y",function(){return n.select(this).property("gapy")})}}else{if((F!=="single")&&(G>T)){var W=Math.max((T-G-10),M);if(W<0){ag.attr("y",function(){return n.select(this).property("curry")+W})}}}if(aq>10){ag.attr("width",aq).select("rect").attr("width",aq)}s.property("startx",L)};b.TCanvasStatusBits={kShowEventStatus:b.BIT(15),kAutoExec:b.BIT(16),kMenuBar:b.BIT(17),kShowToolBar:b.BIT(18),kShowEditor:b.BIT(19),kMoveOpaque:b.BIT(20),kResizeOpaque:b.BIT(21),kIsGrayscale:b.BIT(22),kShowToolTips:b.BIT(23)};b.EAxisBits={kTickPlus:b.BIT(9),kTickMinus:b.BIT(10),kAxisRange:b.BIT(11),kCenterTitle:b.BIT(12),kCenterLabels:b.BIT(14),kRotateTitle:b.BIT(15),kPalette:b.BIT(16),kNoExponent:b.BIT(17),kLabelsHori:b.BIT(18),kLabelsVert:b.BIT(19),kLabelsDown:b.BIT(20),kLabelsUp:b.BIT(21),kIsInteger:b.BIT(22),kMoreLogLabels:b.BIT(23),kDecimals:b.BIT(11)};f.drawRawText=function(r,o,q){var p=new l();p.txt=o;p.SetDivId(r);p.RedrawObject=function(s){this.txt=s;this.Draw();return true};p.Draw=function(){var u=this.txt.value;if(typeof u!="string"){u="<undefined>"}var w=this.txt.mathjax||(b.gStyle.Latex==4);if(!w&&!("as_is" in this.txt)){var t=u.split("\n");u="";for(var v=0;v<t.length;++v){u+="<pre>"+t[v]+"</pre>"}}var x=this.select_main(),s=x.select("div");if(s.empty()){s=x.append("div").style("max-width","100%").style("max-height","100%").style("overflow","auto")}s.html(u);this.SetDivId(this.divid);if(w){b.AssertPrerequisites("mathjax",function(){MathJax.Hub.Typeset(x.node())})}};p.Draw();return p.DrawingReady()};b.RegisterForResize=function(r,p){if(!r){return}var s=null,o=p?p:300;if(o<20){o=20}function q(){s=null;document.body.style.cursor="wait";if(typeof r=="function"){r()}else{if((typeof r=="object")&&(typeof r.CheckResize=="function")){r.CheckResize()}else{if(typeof r=="string"){var u=n.select("#"+r);if(!u.empty()){var v=u.property("mdi");if(v){v.CheckMDIResize()}else{b.resize(u.node())}}}}}document.body.style.cursor="auto"}function t(){if(s!==null){clearTimeout(s)}s=setTimeout(q,o)}window.addEventListener("resize",t)};b.addDrawFunc({name:"TCanvas",icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawCanvas",opt:";grid;gridx;gridy;tick;tickx;ticky;log;logx;logy;logz",expand_item:"fPrimitives"});b.addDrawFunc({name:"TPad",icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawPad",opt:";grid;gridx;gridy;tick;tickx;ticky;log;logx;logy;logz",expand_item:"fPrimitives"});b.addDrawFunc({name:"TSlider",icon:"img_canvas",prereq:"v6",func:"JSROOT.Painter.drawPad"});b.addDrawFunc({name:"TFrame",icon:"img_frame",prereq:"v6",func:"JSROOT.Painter.drawFrame"});b.addDrawFunc({name:"TPave",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TPaveText",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TPavesText",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TPaveStats",icon:"img_pavetext",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TPaveLabel",icon:"img_pavelabel",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TDiamond",icon:"img_pavelabel",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TLatex",icon:"img_text",prereq:"more2d",func:"JSROOT.Painter.drawText",direct:true});b.addDrawFunc({name:"TMathText",icon:"img_text",prereq:"more2d",func:"JSROOT.Painter.drawText",direct:true});b.addDrawFunc({name:"TText",icon:"img_text",prereq:"more2d",func:"JSROOT.Painter.drawText",direct:true});b.addDrawFunc({name:/^TH1/,icon:"img_histo1d",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram1D",opt:";hist;P;P0;E;E1;E2;E3;E4;E1X0;L;LF2;B;B1;A;TEXT;LEGO;same",ctrl:"l"});b.addDrawFunc({name:"TProfile",icon:"img_profile",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram1D",opt:";E0;E1;E2;p;AH;hist"});b.addDrawFunc({name:"TH2Poly",icon:"img_histo2d",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram2D",opt:";COL;COL0;COLZ;LCOL;LCOL0;LCOLZ;LEGO;same",expand_item:"fBins",theonly:true});b.addDrawFunc({name:"TH2PolyBin",icon:"img_histo2d",draw_field:"fPoly"});b.addDrawFunc({name:/^TH2/,icon:"img_histo2d",prereq:"v6;hist",func:"JSROOT.Painter.drawHistogram2D",opt:";COL;COLZ;COL0;COL1;COL0Z;COL1Z;COLA;BOX;BOX1;SCAT;TEXT;CONT;CONT1;CONT2;CONT3;CONT4;ARR;SURF;SURF1;SURF2;SURF4;SURF6;E;A;LEGO;LEGO0;LEGO1;LEGO2;LEGO3;LEGO4;same",ctrl:"colz"});b.addDrawFunc({name:"TProfile2D",sameas:"TH2"});b.addDrawFunc({name:/^TH3/,icon:"img_histo3d",prereq:"v6;hist3d",func:"JSROOT.Painter.drawHistogram3D",opt:";SCAT;BOX;BOX2;BOX3;GLBOX1;GLBOX2;GLCOL"});b.addDrawFunc({name:"THStack",icon:"img_histo1d",prereq:"v6;hist",func:"JSROOT.Painter.drawHStack",expand_item:"fHists",opt:"NOSTACK;HIST;E;PFC;PLC"});b.addDrawFunc({name:"TPolyMarker3D",icon:"img_histo3d",prereq:"v6;hist3d",func:"JSROOT.Painter.drawPolyMarker3D"});b.addDrawFunc({name:"TPolyLine3D",icon:"img_graph",prereq:"3d",func:"JSROOT.Painter.drawPolyLine3D",direct:true});b.addDrawFunc({name:"TGraphStruct"});b.addDrawFunc({name:"TGraphNode"});b.addDrawFunc({name:"TGraphEdge"});b.addDrawFunc({name:"TGraphTime",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraphTime",opt:"once;repeat;first",theonly:true});b.addDrawFunc({name:"TGraph2D",icon:"img_graph",prereq:"v6;hist3d",func:"JSROOT.Painter.drawGraph2D",opt:";P;PCOL",theonly:true});b.addDrawFunc({name:"TGraph2DErrors",icon:"img_graph",prereq:"v6;hist3d",func:"JSROOT.Painter.drawGraph2D",opt:";P;PCOL;ERR",theonly:true});b.addDrawFunc({name:"TGraphPolargram",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraphPolargram",theonly:true});b.addDrawFunc({name:"TGraphPolar",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraphPolar",opt:";F;L;P;PE",theonly:true});b.addDrawFunc({name:/^TGraph/,icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawGraph",opt:";L;P"});b.addDrawFunc({name:"TEfficiency",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawEfficiency",opt:";AP"});b.addDrawFunc({name:"TCutG",sameas:"TGraph"});b.addDrawFunc({name:/^RooHist/,sameas:"TGraph"});b.addDrawFunc({name:/^RooCurve/,sameas:"TGraph"});b.addDrawFunc({name:"RooPlot",icon:"img_canvas",prereq:"more2d",func:"JSROOT.Painter.drawRooPlot"});b.addDrawFunc({name:"TMultiGraph",icon:"img_mgraph",prereq:"more2d",func:"JSROOT.Painter.drawMultiGraph",expand_item:"fGraphs"});b.addDrawFunc({name:"TStreamerInfoList",icon:"img_question",prereq:"hierarchy",func:"JSROOT.Painter.drawStreamerInfo"});b.addDrawFunc({name:"TPaletteAxis",icon:"img_colz",prereq:"v6;hist",func:"JSROOT.Painter.drawPaletteAxis"});b.addDrawFunc({name:"TWebPainting",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawWebPainting"});b.addDrawFunc({name:"TPadWebSnapshot",icon:"img_canvas",func:b.Painter.drawPadSnapshot});b.addDrawFunc({name:"kind:Text",icon:"img_text",func:b.Painter.drawRawText});b.addDrawFunc({name:"TF1",icon:"img_tf1",prereq:"math;more2d",func:"JSROOT.Painter.drawFunction"});b.addDrawFunc({name:"TF2",icon:"img_tf2",prereq:"math;hist",func:"JSROOT.Painter.drawTF2"});b.addDrawFunc({name:"TSpline3",icon:"img_tf1",prereq:"more2d",func:"JSROOT.Painter.drawSpline"});b.addDrawFunc({name:"TSpline5",icon:"img_tf1",prereq:"more2d",func:"JSROOT.Painter.drawSpline"});b.addDrawFunc({name:"TEllipse",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawEllipse",direct:true});b.addDrawFunc({name:"TArc",sameas:"TEllipse"});b.addDrawFunc({name:"TCrown",sameas:"TEllipse"});b.addDrawFunc({name:"TPie",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawPie",direct:true});b.addDrawFunc({name:"TLine",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawLine",direct:true});b.addDrawFunc({name:"TArrow",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawArrow",direct:true});b.addDrawFunc({name:"TPolyLine",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawPolyLine",direct:true});b.addDrawFunc({name:"TCurlyLine",sameas:"TPolyLine"});b.addDrawFunc({name:"TCurlyArc",sameas:"TPolyLine"});b.addDrawFunc({name:"TGaxis",icon:"img_graph",prereq:"v6",func:"JSROOT.Painter.drawGaxis"});b.addDrawFunc({name:"TLegend",icon:"img_pavelabel",prereq:"v6;hist",func:"JSROOT.Painter.drawPave"});b.addDrawFunc({name:"TBox",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawBox",direct:true});b.addDrawFunc({name:"TWbox",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawBox",direct:true});b.addDrawFunc({name:"TSliderBox",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawBox",direct:true});b.addDrawFunc({name:"TAxis3D",prereq:"v6;hist3d",func:"JSROOT.Painter.drawAxis3D"});b.addDrawFunc({name:"TMarker",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawMarker",direct:true});b.addDrawFunc({name:"TPolyMarker",icon:"img_graph",prereq:"more2d",func:"JSROOT.Painter.drawPolyMarker",direct:true});b.addDrawFunc({name:"TGeoVolume",icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",expand:"JSROOT.GEO.expandObject",opt:";more;all;count;projx;projz;dflt",ctrl:"dflt"});b.addDrawFunc({name:"TEveGeoShapeExtract",icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",expand:"JSROOT.GEO.expandObject",opt:";more;all;count;projx;projz;dflt",ctrl:"dflt"});b.addDrawFunc({name:"ROOT::Experimental::TEveGeoShapeExtract",icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",expand:"JSROOT.GEO.expandObject",opt:";more;all;count;projx;projz;dflt",ctrl:"dflt"});b.addDrawFunc({name:"TGeoManager",icon:"img_histo3d",prereq:"geom",expand:"JSROOT.GEO.expandObject",func:"JSROOT.Painter.drawGeoObject",opt:";more;all;count;projx;projz;dflt",dflt:"expand",ctrl:"dflt"});b.addDrawFunc({name:/^TGeo/,icon:"img_histo3d",prereq:"geom",func:"JSROOT.Painter.drawGeoObject",opt:";more;all;axis;compa;count;projx;projz;dflt",ctrl:"dflt"});b.addDrawFunc({name:"kind:Command",icon:"img_execute",execute:true});b.addDrawFunc({name:"TFolder",icon:"img_folder",icon2:"img_folderopen",noinspect:true,prereq:"hierarchy",expand:"JSROOT.Painter.FolderHierarchy"});b.addDrawFunc({name:"TTask",icon:"img_task",prereq:"hierarchy",expand:"JSROOT.Painter.TaskHierarchy",for_derived:true});b.addDrawFunc({name:"TTree",icon:"img_tree",prereq:"tree",expand:"JSROOT.Painter.TreeHierarchy",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:"player;testio",shift:"inspect"});b.addDrawFunc({name:"TNtuple",icon:"img_tree",prereq:"tree",expand:"JSROOT.Painter.TreeHierarchy",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:"player;testio",shift:"inspect"});b.addDrawFunc({name:"TNtupleD",icon:"img_tree",prereq:"tree",expand:"JSROOT.Painter.TreeHierarchy",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:"player;testio",shift:"inspect"});b.addDrawFunc({name:"TBranchFunc",icon:"img_leaf_method",prereq:"tree",func:"JSROOT.Painter.drawTree",opt:";dump",noinspect:true});b.addDrawFunc({name:/^TBranch/,icon:"img_branch",prereq:"tree",func:"JSROOT.Painter.drawTree",dflt:"expand",opt:";dump",ctrl:"dump",shift:"inspect",ignore_online:true});b.addDrawFunc({name:/^TLeaf/,icon:"img_leaf",prereq:"tree",noexpand:true,func:"JSROOT.Painter.drawTree",opt:";dump",ctrl:"dump",ignore_online:true});b.addDrawFunc({name:"TList",icon:"img_list",prereq:"hierarchy",func:"JSROOT.Painter.drawList",expand:"JSROOT.Painter.ListHierarchy",dflt:"expand"});b.addDrawFunc({name:"THashList",sameas:"TList"});b.addDrawFunc({name:"TObjArray",sameas:"TList"});b.addDrawFunc({name:"TClonesArray",sameas:"TList"});b.addDrawFunc({name:"TMap",sameas:"TList"});b.addDrawFunc({name:"TColor",icon:"img_color"});b.addDrawFunc({name:"TFile",icon:"img_file",noinspect:true});b.addDrawFunc({name:"TMemFile",icon:"img_file",noinspect:true});b.addDrawFunc({name:"TStyle",icon:"img_question",noexpand:true});b.addDrawFunc({name:"Session",icon:"img_globe"});b.addDrawFunc({name:"kind:TopFolder",icon:"img_base"});b.addDrawFunc({name:"kind:Folder",icon:"img_folder",icon2:"img_folderopen",noinspect:true});b.addDrawFunc({name:"ROOT::Experimental::TCanvas",icon:"img_canvas",prereq:"v7",func:"JSROOT.v7.drawCanvas",opt:"",expand_item:"fPrimitives"});b.getDrawHandle=function(q,r){if(typeof q!="string"){return null}if(r===""){r=null}var u=null;if((r===null)&&(q in b.DrawFuncs.cache)){return b.DrawFuncs.cache[q]}var w=(q.indexOf("ROOT.")==0)?q.substr(5):"kind:"+q,p=0;for(var t=0;t<b.DrawFuncs.lst.length;++t){var v=b.DrawFuncs.lst[t];if(typeof v.name=="string"){if(v.name!=w){continue}}else{if(!w.match(v.name)){continue}}if(v.sameas!==undefined){return b.getDrawHandle("ROOT."+v.sameas,r)}if((r===null)||(r===undefined)){if(!(q in b.DrawFuncs.cache)){b.DrawFuncs.cache[q]=v}return v}else{if(typeof r=="string"){if(!u){u=v}if(r=="::expand"){if(("expand" in v)||("expand_item" in v)){return v}}else{if("opt" in v){var o=v.opt.split(";");for(var s=0;s<o.length;++s){o[s]=o[s].toLowerCase()}if(o.indexOf(r.toLowerCase())>=0){return v}}}}else{if(r===p){return v}}}++p}return u};b.addStreamerInfos=function(p){if(p===null){return}function o(x,w){if(x.fElements==null){return null}if(w>10){return null}for(var v=0;v<x.fElements.arr.length;++v){var y=x.fElements.arr[v];if(y.fTypeName!=="BASE"){continue}var z=b.getDrawHandle("ROOT."+y.fName);if(z&&!z.for_derived){z=null}if(z===null){for(var u=0;u<p.arr.length;++u){if(p.arr[u].fName===y.fName){z=o(p.arr[u],w+1);break}}}if(z&&z.for_derived){return z}}return null}for(var t=0;t<p.arr.length;++t){var q=p.arr[t];if(b.getDrawHandle("ROOT."+q.fName)!==null){continue}var r=o(q,0);if(!r){continue}var s=b.extend({},r);s.name=q.fName;b.DrawFuncs.lst.push(s)}};b.getDrawSettings=function(q,r){var w={opts:null,inspect:false,expand:false,draw:false,handle:null};if(typeof q!="string"){return w}var s=null,u=false,x=false,y=false;if(typeof r!=="string"){r=""}for(var p=0;p<1000;++p){var v=b.getDrawHandle(q,p);if(!v){break}if(!w.handle){w.handle=v}if(v.noinspect){x=true}if(v.expand||v.expand_item||v.can_expand){y=true}if(!("func" in v)){break}u=true;if(!("opt" in v)){continue}var o=v.opt.split(";");for(var t=0;t<o.length;++t){o[t]=o[t].toLowerCase();if((r.indexOf("nosame")>=0)&&(o[t].indexOf("same")==0)){continue}if(w.opts===null){w.opts=[]}if(w.opts.indexOf(o[t])<0){w.opts.push(o[t])}}if(v.theonly){break}}if(r.indexOf("noinspect")>=0){x=true}if(u&&(w.opts===null)){w.opts=[""]}if(!u&&(q.indexOf("ROOT.")==0)&&!x){w.opts=[]}if(!x&&w.opts){w.opts.push("inspect")}w.inspect=!x;w.expand=y;w.draw=w.opts&&(w.opts.length>0);return w};b.getDrawOptions=function(p,o){return b.getDrawSettings(p).opts};b.canDraw=function(o){return b.getDrawSettings("ROOT."+o).opts!==null};b.draw=function(w,u,r,o){var z=true;function q(A){var B=null,C=false;if(typeof o=="function"){B=o}else{if(o&&(typeof o=="object")&&(typeof o.func=="function")){B=o.func;C=true}}if(C&&z){if(!A||A._ready_called_){o.completed=true;return A}}if(A&&o&&(typeof A.WhenReady=="function")){A.WhenReady(B)}else{b.CallBack(B,A)}return A}if((u===null)||(typeof u!=="object")){return q(null)}if(r=="inspect"){var s=b.findFunction("JSROOT.Painter.drawInspector");if(s){return q(s(w,u))}b.AssertPrerequisites("hierarchy",function(){q(b.Painter.drawInspector(w,u))});return null}var v=null,x=null;if("_typename" in u){v=b.getDrawHandle("ROOT."+u._typename,r)}else{if("_kind" in u){v=b.getDrawHandle(u._kind,r)}}if(!v){return q(null)}if(v.draw_field&&u[v.draw_field]){return b.draw(w,u[v.draw_field],r,o)}if(!v.func){return q(null)}function p(){if(v.direct){x=new e(u);x.SetDivId(w,2);x.Redraw=v.func;x.options={original:r||""};x.Redraw();x.DrawingReady()}else{x=v.func(w,u,r);if(x&&!x.options){x.options={original:r||""}}}return q(x)}if(typeof v.func=="function"){return p()}var t="",y="";if(typeof v.func=="object"){if("func" in v.func){t=v.func.func}if("script" in v.func){y="user:"+v.func.script}}else{if(typeof v.func=="string"){t=v.func;if(("prereq" in v)&&(typeof v.prereq=="string")){y=v.prereq}if(("script" in v)&&(typeof v.script=="string")){y+=";user:"+v.script}}}if(t.length===0){return q(null)}var s=b.findFunction(t);if(s){v.func=s;return p()}if(y.length===0){return q(null)}z=false;b.AssertPrerequisites(y,function(){var A=b.findFunction(t);if(!A){alert("Fail to find function "+t+" after loading "+y);return q(null)}v.func=A;p()});return x};b.redraw=function(u,r,o,w){if(!r){return b.CallBack(w,null)}var p=new e();p.SetDivId(u,-1);var q=p.canv_painter();var t=null;if(r._typename){t=b.getDrawHandle("ROOT."+r._typename)}if(t&&t.draw_field&&r[t.draw_field]){r=r[t.draw_field]}if(q){if(r._typename==="TCanvas"){q.RedrawObject(r);b.CallBack(w,q);return q}for(var s=0;s<q.painters.length;++s){var v=q.painters[s];if(v.MatchObjectType(r._typename)){if(v.UpdateObject(r)){q.RedrawPad();b.CallBack(w,v);return v}}}}if(q){b.console("Cannot find painter to update object of type "+r._typename)}b.cleanup(u);return b.draw(u,r,o,w)};b.MakeSVG=function(p,s){if(!p){p={}}if(!p.object){return b.CallBack(s,null)}if(!p.width){p.width=1200}if(!p.height){p.height=800}function r(t){t.attr("width",p.width).attr("height",p.height);t.style("width",p.width+"px").style("height",p.height+"px");b.svg_workaround=undefined;b.draw(t.node(),p.object,p.option||"",function(u){t.select("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("width",p.width).attr("height",p.height).attr("style","").attr("style",null).attr("class",null).attr("x",null).attr("y",null);var w=t.html();if(b.svg_workaround){for(var v=0;v<b.svg_workaround.length;++v){w=w.replace('<path jsroot_svg_workaround="'+v+'"></path>',b.svg_workaround[v])}b.svg_workaround=undefined}w=w.replace(/url\(\&quot\;\#(\w+)\&quot\;\)/g,"url(#$1)").replace(/ class=\"\w*\"/g,"").replace(/<g transform=\"translate\(\d+\,\d+\)\"><\/g>/g,"").replace(/<g><\/g>/g,"");t.remove();b.CallBack(s,w)})}if(!b.nodejs){r(n.select(window.document).append("div").style("visible","hidden"))}else{if(b.nodejs_document){r(b.nodejs_window.d3.select("body").append("div"))}else{var o;try{o=require("jsdom/lib/old-api.js")}catch(q){o=require("jsdom")}o.env({html:"",features:{QuerySelector:true},done:function(u,t){t.d3=n.select(t.document);b.nodejs_window=t;b.nodejs_document=t.document;r(t.d3.select("body").append("div"))}})}}};b.resize=function(r,o){if(o===true){o={force:true}}else{if(typeof o!=="object"){o=null}}var q=new e(),p=false;q.SetDivId(r,-1);q.ForEachPainter(function(s){if(!p&&typeof s.CheckResize=="function"){p=s.CheckResize(o)}});return p};b.CheckElementResize=b.resize;b.cleanup=function(r){var p=new e(),o=[];p.SetDivId(r,-1);p.ForEachPainter(function(s){if(o.indexOf(s)<0){o.push(s)}});for(var q=0;q<o.length;++q){o[q].Cleanup()}p.select_main().html("");return o};b.progress=function(q,p){if(b.BatchMode||!document){return}var r="jsroot_progressbox",o=n.select("#"+r);if(!b.gStyle.ProgressBox){return o.remove()}if((arguments.length==0)||!q){if((p!==-1)||(!o.empty()&&o.property("with_timeout"))){o.remove()}return}if(o.empty()){o=n.select(document.body).append("div").attr("id",r);o.append("p")}o.property("with_timeout",false);if(typeof q==="string"){o.select("p").html(q)}else{o.html("");o.node().appendChild(q)}if(!isNaN(p)&&(p>0)){o.property("with_timeout",true);setTimeout(b.progress.bind(b,"",-1),p)}};f.createRootColors();b.LongPollSocket=h;b.Cef3QuerySocket=k;b.WebWindowHandle=j;b.DrawOptions=a;b.ColorPalette=m;b.TAttLineHandler=d;b.TAttFillHandler=i;b.TAttMarkerHandler=g;b.TBasePainter=l;b.TObjectPainter=e;b.TooltipHandler=c;return b}));